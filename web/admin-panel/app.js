!function e(t,r,n){function a(i,s){if(!r[i]){if(!t[i]){var u="function"==typeof require&&require;if(!s&&u)return u(i,!0);if(o)return o(i,!0);var c=new Error("Cannot find module '"+i+"'");throw c.code="MODULE_NOT_FOUND",c}var l=r[i]={exports:{}};t[i][0].call(l.exports,function(e){var r=t[i][1][e];return a(r?r:e)},l,l.exports,e,t,r,n)}return r[i].exports}for(var o="function"==typeof require&&require,i=0;i<n.length;i++)a(n[i]);return a}({1:[function(e,t,r){"use strict";var n=e("./app.js"),a="admin.application.prod";angular.module(a,[n.MODULE_NAME]),angular.element(document).ready(function(){angular.bootstrap(document,[a])})},{"./app.js":2}],2:[function(e,t,r){"use strict";var n=e("./modules/security/security.js"),a=e("./modules/update/update.js"),o=e("./modules/user/user.js"),i=e("./modules/tagContainer/tagContainer.js"),s=e("./modules/tag/tag.js"),u=e("./modules/trigger/trigger.js"),c=e("./modules/variable/variable.js"),l=e("./modules/integration/integration.js"),f=e("./modules/condition/condition.js"),d=e("./modules/debug/debug.js"),h=e("./../modules/alert/alert.js"),p=e("./../modules/translation/translation.js"),v=e("./../modules/form/form.js"),g=e("./../modules/confirm/confirm.js"),m=e("./../modules/sanitize/sanitize.js"),y=e("./../modules/clipboard/clipboard.js"),b=e("./../modules/pageInfo/pageInfo.js"),j=e("./../modules/helpSystem/helpSystem.js"),P=e("./../modules/validator/validator.js"),w=e("./../modules/textEditor/textEditor.js"),C="admin.application";angular.module("admin.application.plugins",[s.MODULE_NAME]),angular.module(C,["pascalprecht.translate","cgBusy","ui.router","ui.bootstrap","checklist-model","http-auth-interceptor",n.MODULE_NAME,a.MODULE_NAME,o.MODULE_NAME,f.MODULE_NAME,u.MODULE_NAME,c.MODULE_NAME,l.MODULE_NAME,s.MODULE_NAME,i.MODULE_NAME,h.MODULE_NAME,p.MODULE_NAME,v.MODULE_NAME,g.MODULE_NAME,m.MODULE_NAME,y.MODULE_NAME,b.MODULE_NAME,j.MODULE_NAME,P.MODULE_NAME,d.MODULE_NAME,w.MODULE_NAME,"ngClipboard","admin.application.plugins"]).run(["$rootScope","$state","clearcode.tm.alert.$alert","clearcode.tm.security.security","clearcode.tm.security.oauthResource","clearcode.tm.security.tokenStorage","authService","clearcode.tm.variable.$variableForm",function(e,t,r,n,a,o,i,s){s.addType("dataLayer",{templateUrl:"app/modules/variable/views/types/dataLayer.html"}).addType("cookie",{templateUrl:"app/modules/variable/views/types/cookie.html"}).addType("constant",{templateUrl:"app/modules/variable/views/types/constant.html"}).addType("document",{templateUrl:"app/modules/variable/views/types/document.html"}).addType("random",{templateUrl:"app/modules/variable/views/types/random.html"}).addType("url",{templateUrl:"app/modules/variable/views/types/url.html"}),r.addMessagePattern("error.invalid","Form is invalid. Please correct selected fields"),r.addMessagePattern("success.create","Settings saved successfully"),r.addMessagePattern("success.edit","Settings saved successfully"),r.addMessagePattern("success.remove","Deleted successfully"),e.$state=t,e.animateSidebarReady=!1,e.isContainerView=function(){return!1},e.$on("$stateChangeStart",function(t,r,a){e.isContainerView=function(){var t=void 0!==r.data.hasContainerList?r.data.hasContainerList:!1,a=n.isAuthenticated();return e.animateSidebarReady===!1&&t&&a&&(e.animateSidebarReady=!0),t&&a},e.activeContainerId=a.containerId}),e.$on("event:auth-loginRequired",function(){var e=o.getItem();void 0!==e&&a.refreshToken(e.refreshToken).then(function(e){o.addItem(e),i.loginConfirmed("success",function(e){return e.headers.Authorization=o.getToken(),e})},function(){i.loginCancelled("invalid")})})}]).config(["$urlRouterProvider","ngClipProvider","$translateProvider",function(e,t,r){e.otherwise("/containers"),t.setPath("ZeroClipboard.swf"),r.useSanitizeValueStrategy("escape"),r.useStaticFilesLoader({prefix:"/api/translations/",suffix:".json"}),r.preferredLanguage("en"),r.useLocalStorage()}]).value("cgBusyDefaults",{wrapperClass:"loading"}).value("longDataFormat","dd MMMM yyyy").value("defaultDateFormat","yyyy-MM-dd HH:mm").filter("reverse",function(){return function(e){return e.slice().reverse()}}),t.exports={MODULE_NAME:C}},{"./../modules/alert/alert.js":91,"./../modules/clipboard/clipboard.js":99,"./../modules/confirm/confirm.js":101,"./../modules/form/form.js":108,"./../modules/helpSystem/helpSystem.js":111,"./../modules/pageInfo/pageInfo.js":116,"./../modules/sanitize/sanitize.js":120,"./../modules/textEditor/textEditor.js":126,"./../modules/translation/translation.js":129,"./../modules/validator/validator.js":131,"./modules/condition/condition.js":3,"./modules/debug/debug.js":9,"./modules/integration/integration.js":17,"./modules/security/security.js":24,"./modules/tag/tag.js":39,"./modules/tagContainer/tagContainer.js":52,"./modules/trigger/trigger.js":60,"./modules/update/update.js":65,"./modules/user/user.js":76,"./modules/variable/variable.js":90}],3:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var a=e("./resource/ConditionResource.js"),o=n(a),i=e("./services/Condition.js"),s=n(i),u="clearcode.tm.condition";s["default"].$inject=[u+".conditionResource","clearcode.tm.tagContainer.currentContainer"],o["default"].$inject=["$http","$q"],angular.module(u,["clearcode.tm.tagContainer"]).service(u+".conditionResource",o["default"]).service(u+".condition",s["default"]),t.exports={MODULE_NAME:u}},{"./resource/ConditionResource.js":5,"./services/Condition.js":6}],4:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){var e=function t(){n(this,t),this.id=void 0,this.variable=void 0,this.condition=void 0,this.value=void 0};return e};r["default"]=a},{}],5:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=e("../entity/Condition.js"),s=n(i),u=function(){function e(t,r){a(this,e),this.http=t,this.q=r}return o(e,[{key:"getEntityObject",value:function(){var e=(0,s["default"])();return new e}},{key:"query",value:function(e){var t=this.q.defer();return this.http({method:"GET",url:"/api/containers/"+e+"/conditions"}).success(function(e){t.resolve(e)}).error(function(e){t.reject(e)}),t.promise}}]),e}();r["default"]=u},{"../entity/Condition.js":4}],6:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){var r=[];for(var n in e){var a=!1;for(var i in t)if(o(t[i],e[n])){a=!0;break}a||r.push(e[n])}return r.concat(t)}function o(e,t){return e.name===t.name}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function(e,t){var r=t;return e.filter(function(e){return e.type===r})},u=void 0,c=void 0,l=function(){function e(t,r){n(this,e),u=r,c=t,void 0!==u.getId()&&(this.conditionResourcePromise=c.query(u.getId()))}return i(e,[{key:"getArrayOfTypes",value:function(){return this.conditionResourcePromise.then(function(e){for(var t=[],r=e.length;r--;)t[e[r].type]=e[r].name;return t})}},{key:"allVariables",value:function(){return this.conditionResourcePromise.then(function(e){for(var t=[],r=0;r<e.length;r++)t=t.length?a(t,e[r].variables):e[r].variables;return t})}},{key:"getVariables",value:function(e){var t=this;return this.type=e,this.conditionResourcePromise.then(function(e){var r=s(e,t.type);return 1===r.length?r[0].variables:!1})}},{key:"getRequired",value:function(e){var t=this;return this.type=e,this.conditionResourcePromise.then(function(e){var r=s(e,t.type);return 1===r.length?r[0].variables.filter(function(e){return"Event"===e.name&&"Event"===r[0].name}):!1})}},{key:"getActions",value:function(e){var t=this;return this.type=e,this.conditionResourcePromise.then(function(e){var r=s(e,t.type);return 1===r.length?r[0].actions:!1})}},{key:"refresh",value:function(){this.conditionResourcePromise=c.query(u.getId())}}]),e}();r["default"]=l},{}],7:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a,o,i,s,u="Debug",c=function l(e,t,r,c,f,d,h){var p=this;n(this,l);var v=this;a=t,o=r,i=c,s=d,this.container=e.getEntityObject(),this.containerPromise=e.get(o.containerId),this.containerPromise.then(function(e){v.container=e}),this.translate=h,i.getContainer().then(function(){i.$container.hasPermission("noaccess")&&a.go("container"),p.translate([u]).then(function(e){f.clear().add(i.$container.name,"tags",{containerId:i.$container.id}).add(e[u]).broadcast()})}),s.$on("pageInfo.reload",function(e,t){p.translate([u]).then(function(e){f.clear().add(t.name,"tags",{containerId:t.id}).add(e[u]).broadcast()})})};r["default"]=c},{}],8:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a,o,i,s,u,c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=function(){function e(t,r,c,l,f,d,h){var p=this;n(this,e),a=r,o=c,i=l,s=f,u=t,this.websites=[],this.websitesPromise=u.query(o.containerId),this.websitesPromise.then(function(e){p.websites=e.data}),d(["by hash","by query"]).then(function(e){p.parameterTypes=[{value:0,name:e["by query"]},{value:1,name:e["by hash"]}]}),h.getWebsiteUrlWithParameter=function(e){return e.getUrlWithParameter()}}return c(e,[{key:"addContainerWebsite",value:function(){s.$container.hasPermission("edit")&&(this.websites||(this.websites=[]),this.websites.push(u.getEntityObject()))}},{key:"removeContainerWebsite",value:function(e){this.websites.splice(e,1)}},{key:"submitForm",value:function(){for(var e=this,t=[],r=0;this.websites&&r<this.websites.length;r++){var n=u.getEntityObject();n.url=this.websites[r].url,n.parameterType=this.websites[r].parameterType,t.push(n)}this.websitePromise=u.put(o.containerId,t),this.websitePromise.then(function(){s.get(o.containerId),i.success("success.edit"),a.go("debug",{containerId:o.containerId})},function(){i.error("error.invalid"),e.validateContainer=!0})}}]),e}();r["default"]=l},{}],9:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var a=e("./controllers/DebugOptionsController.js"),o=n(a),i=e("./controllers/WebsitesController.js"),s=n(i),u=e("./resource/WebsiteResource.js"),c=n(u),l="clearcode.tm.debug",f="clearcode.tm.tagContainer",d="app/modules/debug";c["default"].$inject=["$http","$q"],s["default"].$inject=[l+".websiteResource","$state","$stateParams","clearcode.tm.alert.alert",f+".currentContainer","$translate","$scope"],o["default"].$inject=[f+".containerResource","$state","$stateParams",f+".currentContainer","clearcode.tm.pageInfo.pageInfo","$scope","$translate"],angular.module(l,["pascalprecht.translate","ui.router","ngTable","ngCookies","clearcode.tm.condition","clearcode.tm.alert","clearcode.tm.pageInfo","clearcode.tm.user"]).run(["$rootScope",f+".currentContainer","$stateParams","clearcode.tm.alert.$alert",function(e,t,r,n){e.currentContainerLoading=!0,e.currentContainer=t;var a=function(n){if(n!==r.containerId){var a=t.get(n);a.then(function(t){e.$broadcast("pageInfo.reload",t)})}};e.$on("$stateChangeStart",function(e,t,r){a(r.containerId)})}]).config(["$stateProvider",function(e){e.state("debug",{url:"/containers/{containerId}/debug",controller:l+".DebugOptionsController as view",templateUrl:d+"/views/options.html",data:{roles:["ROLE_SUPER_ADMIN"],hasContainerList:!0,permission:["view"]}})}]).controller(l+".DebugOptionsController",o["default"]).controller(l+".WebsitesController",s["default"]).service(l+".websiteResource",c["default"]),t.exports={MODULE_NAME:l}},{"./controllers/DebugOptionsController.js":7,"./controllers/WebsitesController.js":8,"./resource/WebsiteResource.js":11}],10:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(e){var t="_stg_debug",r=10,o=function(){function e(){n(this,e),this.url="",this.parameterType=0}return a(e,[{key:"getUrlWithParameter",value:function(){return this.hasUrl()===!1?"":this.url+this.getSeparator()+t}},{key:"getSeparator",value:function(){var e=1===this.parameterType?"#":"?";return this.hasUrl()===!1?e:-1===this.url.indexOf(e)?e:"&"}},{key:"hasUrl",value:function(){return void 0!==this.url&&this.url.length>r}}]),e}();return o};r["default"]=o},{}],11:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){return 400>t&&void 0!==e.data}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=e("../entity/Website.js"),u=n(s),c=function d(e){var t=this;if(angular.isArray(e))return e.map(function(e){return d.call(t,e)});var r=this.getEntityObject();return void 0!==e&&(r.url=e.url,r.parameterType=e.parameter_type),r},l=function(e,t){return e=angular.isArray(e)?e:[e],e.concat(t)},f=function(){function e(t,r){a(this,e),this.http=t,this.q=r}return i(e,[{key:"getEntityObject",value:function(){var e=(0,u["default"])(this);return new e}},{key:"query",value:function(e,t){var r=this,n=this.q.defer();return this.http({method:"GET",url:"/api/containers/"+e+"/websites",params:t,transformResponse:l(this.http.defaults.transformResponse,function(e,t,n){if(o(e,n))for(var a=0;a<e.data.length;a++)e.data[a]instanceof Object&&(e.data[a]=c.call(r,e.data[a]));return e})}).success(function(e){n.resolve(e)}).error(function(e){n.reject(e)}),n.promise}},{key:"put",value:function(e,t){var r=this,n=this.q.defer();return this.http({method:"PUT",data:{websites:t},url:"api/containers/"+e+"/websites",transformResponse:l(this.http.defaults.transformResponse,function(e,t,n){return o(e,n)?c.call(r,e.data):e})}).success(function(e){n.resolve(e)}).error(function(e){n.reject(e)}),n.promise}}]),e}();r["default"]=f},{"../entity/Website.js":10}],12:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(t,r,a,o,i,s){var u=this;n(this,e),this.integration=t.getEntityObject();var c="Integrations";s([c,this.getBreadcrumbText()]).then(function(e){r.clear().add(e[c],"integration").add(e[u.getBreadcrumbText()]).broadcast()}),this.stateParams=a,this.alert=o,this.state=i,this.formTouched=!1}return a(e,[{key:"submitForm",value:function(e){var t=this;this.integrationPromise=e.save(this.stateParams.id),this.integrationPromise.then(function(e){t.alert.success(t.getAlertType()),t.state.includes("integrationCreate")?t.state.go("integrationEdit",{integrationId:e.id}):t.state.go("integration")},function(){t.alert.error("error.invalid")})}},{key:"displayInvalidFormMessage",value:function(){this.validateIntegration=!0,this.alert.error("error.invalid")}}]),e}();r["default"]=o},{}],13:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e("./BaseController.js"),c=n(u),l=function(e){function t(e,r,n,i,s,u){a(this,t);var c=o(this,Object.getPrototypeOf(t).call(this,e,r,n,i,s,u));return c.integration=e.getEntityObject(),c}return i(t,e),s(t,[{key:"getBreadcrumbText",value:function(){return"Add a new integration"}},{key:"getAlertType",value:function(){return"success.create"}}]),t}(c["default"]);r["default"]=l},{"./BaseController.js":12}],14:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e("./BaseController.js"),c=n(u),l=function(e){function t(e,r,n,i,s,u){a(this,t);var c=o(this,Object.getPrototypeOf(t).call(this,e,r,n,i,s,u));return c.integrationPromise=e.get(n.integrationId),c.integrationPromise.then(function(e){c.integration=e}),c.formTouched=!0,c}return i(t,e),s(t,[{key:"getBreadcrumbText",value:function(){return"Edit integration"}},{key:"getAlertType",value:function(){return"success.edit"}}]),t}(c["default"]);r["default"]=l},{"./BaseController.js":12}],15:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a,o,i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function(){function e(t,r,i,s,u,c,l){n(this,e),a=s,o=r,this.permissions=[],this.tableParams=new t({page:1,count:10,sorting:{name:"asc"}},{total:0,getData:function(e,t){i.query(u.list(t.url())).then(function(r){t.total(r.total),e.resolve(r.data)})}});var f="Integrations";l([f]).then(function(e){c.clear().add(e[f]).broadcast()})}return i(e,[{key:"removeIntegration",value:function(e){var t=this;e.remove().then(function(){a.success("success.remove"),1===t.tableParams.data.length&&t.tableParams.page()>1?t.tableParams.page(t.tableParams.page()-1):t.tableParams.reload()},function(){a.error("error.remove"),t.tableParams.reload()})}}]),e}();r["default"]=s},{}],16:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(e){var t=function(){function t(){n(this,t),this.id=void 0,this.name=void 0,this.clientId=void 0,this.clientSecret=void 0,this.createdAt=void 0,this.updatedAt=void 0,this.user=void 0}return a(t,[{key:"save",value:function(){var t,r={},n=["id","updatedAt","createdAt","clientId","clientSecret","user"];for(var a in this)!angular.isFunction(this[a])&&this.hasOwnProperty(a)&&-1===n.indexOf(a)&&("type"===a?r[a]=this[a].id:r[a]=this[a]);return void 0===this.id?(this.user.email&&(r.user={},r.user.email=this.user.email),t=e.post(r)):t=e.put(this.id,r),t}},{key:"remove",value:function(){return void 0===this.id?!1:e["delete"](this.id)}}]),t}();return t};r["default"]=o},{}],17:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var a=e("./controllers/ManageController.js"),o=n(a),i=e("./controllers/CreateController.js"),s=n(i),u=e("./controllers/EditController.js"),c=n(u),l=e("./resource/IntegrationResource.js"),f=n(l),d="clearcode.tm.integration",h="app/modules/integration";o["default"].$inject=["ngTableParams","$stateParams",d+".IntegrationResource","clearcode.tm.alert.alert","clearcode.tm.tagContainer.paramConverter","clearcode.tm.pageInfo.pageInfo","$translate"],s["default"].$inject=[d+".IntegrationResource","clearcode.tm.pageInfo.pageInfo","$stateParams","clearcode.tm.alert.alert","$state","$translate"],c["default"].$inject=[d+".IntegrationResource","clearcode.tm.pageInfo.pageInfo","$stateParams","clearcode.tm.alert.alert","$state","$translate"],f["default"].$inject=["$http","$q"],angular.module(d,["pascalprecht.translate","ui.router","ngTable","clearcode.tm.alert","clearcode.tm.pageInfo","clearcode.tm.tagContainer"]).config(["$stateProvider",function(e){e.state("integration",{url:"/integration",controller:d+".ManageController as view",templateUrl:h+"/views/manage.html",data:{roles:["ROLE_SUPER_ADMIN"],hasContainerList:!1}}).state("integrationCreate",{url:"/integration/create",controller:d+".CreateController as view",templateUrl:h+"/views/create.html",data:{roles:["ROLE_SUPER_ADMIN"],hasContainerList:!1}}).state("integrationEdit",{url:"/integration/{integrationId}/edit",controller:d+".EditController as view",templateUrl:h+"/views/edit.html",data:{roles:["ROLE_SUPER_ADMIN"],hasContainerList:!1}})}]).run(["clearcode.tm.alert.$alert",function(e){e.addMessagePattern("integration.close","You are trying to close unsaved OAuth client.")}]).controller(d+".ManageController",o["default"]).controller(d+".CreateController",s["default"]).controller(d+".EditController",c["default"]).service(d+".IntegrationResource",f["default"]),t.exports={MODULE_NAME:d}},{"./controllers/CreateController.js":13,"./controllers/EditController.js":14,"./controllers/ManageController.js":15,"./resource/IntegrationResource.js":18}],18:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=e("../entity/Integration.js"),s=n(i),u=function(e){var t=(0,s["default"])(this),r=new t;return r.id=e.id,r.name=e.name,r.clientId=e.client_id,r.clientSecret=e.client_secret,r.createdAt=e.created_at,r.updatedAt=e.updated_at,r.user={id:void 0,status:void 0,roles:[],email:void 0},e.user&&(r.user.id=e.user.id,r.user.status=e.user.status,r.user.roles=e.user.roles,e.user.email&&(r.user.email=e.user.email)),r},c=function(e,t){return e=angular.isArray(e)?e:[e],e.concat(t)},l=function(){function e(t,r){a(this,e),this.http=t,this.q=r}return o(e,[{key:"getEntityObject",value:function(){var e=(0,s["default"])(this);return new e}},{key:"get",value:function(e){var t=this,r=this.q.defer();return this.http({method:"GET",url:"/api/integration/"+e,transformResponse:c(this.http.defaults.transformResponse,function(e,r,n){return 400>n?u.call(t,e.data):e})}).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise}},{key:"query",value:function(e){var t=this,r=this.q.defer();return this.http({method:"GET",url:"/api/integration",params:e,transformResponse:c(this.http.defaults.transformResponse,function(e){for(var r in e.data)e.data[r]instanceof Object&&(e.data[r]=u.call(t,e.data[r]));return e})}).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise}},{key:"delete",value:function(e){var t=this.q.defer();return this.http({method:"DELETE",url:"/api/integration/"+e}).success(function(e){t.resolve(e)}).error(function(e){t.reject(e)}),t.promise}},{key:"post",value:function(e){var t=this,r=this.q.defer();return this.http({method:"POST",url:"/api/integration",data:e,transformResponse:c(this.http.defaults.transformResponse,function(e,r,n){return 400>n?u.call(t,e.data):e})}).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise}},{key:"put",value:function(e,t){var r=this,n=this.q.defer();return this.http({method:"PUT",url:"/api/integration/"+e,data:t,transformResponse:c(this.http.defaults.transformResponse,function(e,t,n){return 400>n?u.call(r,e.data):e})}).success(function(e){n.resolve(e)}).error(function(e){n.reject(e)}),n.promise}}]),e}();r["default"]=l},{"../entity/Integration.js":16}],19:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a,o,i,s,u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c="7tag Welcome",l=function(){function e(t,r,u,l,f){n(this,e),this.auth={identity:"",password:""},this.loginPromise=void 0,a=t,o=r,i=u,s=l,s.getStorage().clean(),f.clear().add(c).broadcast()}return u(e,[{key:"submitForm",value:function(e){var t=this;this.loading=!0,this.loginPromise=a.post(e.identity,e.password),this.loginPromise.then(function(e){s.getStorage().clean(),o.addItem(e),i.go("container")},function(){t.loading=!1})}},{key:"displayInvalidLoginMessage",value:function(){s.error("login.invalid")}}]),e}();r["default"]=l},{}],20:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t,r){var n="DELETE",a="/remove";return{request:function(e){return e.method.toUpperCase()===n&&t.deleteHeaderNotSupported===!0&&(e.method="POST",e.url=e.url+a),e},responseError:function(o){var i=r.get("$http");return o.config.method.toUpperCase()===n&&405===o.status?(t.deleteHeaderNotSupported=!0,i.post(o.config.url+a)):e.reject(o)}}};r["default"]=n},{}],21:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n="en",a=function(e){return{request:function(t){var r=e.localStorage.NG_TRANSLATE_LANG_KEY;return/^https?:\/\//i.test(t.url)||(t.headers.Locale=r?r:n),t}}};r["default"]=a},{}],22:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t,r){return{request:function(e){return void 0!==t.getItem()&&/(.js|.html|.css|version.json)$/.test(e.url)===!1&&void 0!==t.getItem()&&(e.headers.Authorization=t.getToken()),e},responseError:function(n){var a=r.get("$state");return 400===n.status&&(!n.data||"invalid_request"!==n.data.error&&"invalid_grant"!==n.data.error||(t.removeItem(),a.go("signIn"))),403===n.status&&a.go("accessDenied"),e.reject(n)}}};r["default"]=n},{}],23:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=e("../token/AuthToken.js"),s=n(i),u="/api/oauth/v2/token",c="/api/users/me/logout",l="password",f=function(e,t,r){if(400>r){var n=this.getEntity();return n.accessToken=e.access_token,n.expiresIn=e.expires_in,n.tokenType=e.token_type,n.scope=e.scope,n.refreshToken=e.refresh_token,n}return e},d=function(e,t){return e=angular.isArray(e)?e:[e],e.concat(t)},h=function(){function e(t,r,n,o){a(this,e),this.http=t,this.q=r,this.tokenStorage=n,this.OAuthClientSettings=o}return o(e,[{key:"getEntity",value:function(){var e=this;return s["default"].prototype.save=function(){var t=e.q.defer();return e.tokenStorage.add(e),t.resolve(e),t.promise},s["default"].prototype.remove=function(){var t=e.q.defer();return e.tokenStorage.remove(),t.resolve(e),t.promise},new s["default"]}},{key:"post",value:function(e,t){var r=this,n=this.q.defer();return this.http({method:"POST",url:u,data:{client_id:this.OAuthClientSettings.clientId,client_secret:this.OAuthClientSettings.clientSecret,grant_type:l,username:e,password:t},ignoreAuthModule:!0,transformResponse:d(this.http.defaults.transformResponse,function(e,t,n){return f.call(r,e,t,n)})}).success(function(e){n.resolve(e)}).error(function(e){n.reject(e)}),n.promise}},{key:"refreshToken",value:function(e){var t=this,r=this.q.defer();return this.http({method:"POST",url:u,data:{client_id:this.OAuthClientSettings.clientId,client_secret:this.OAuthClientSettings.clientSecret,grant_type:"refresh_token",refresh_token:e},ignoreAuthModule:!0,transformResponse:d(this.http.defaults.transformResponse,function(e,r,n){return void 0!==e.error?e:f.call(t,e,r,n)})}).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise}},{key:"logout",value:function(){var e=this.q.defer();return this.http({method:"GET",url:c}).success(function(t){e.resolve(t)}).error(function(t){e.reject(t)}),e.promise}}]),e}();r["default"]=h},{"../token/AuthToken.js":28}],24:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var a=e("./controller/LoginController.js"),o=n(a),i=e("./service/Authorization.js"),s=n(i),u=e("./service/Security.js"),c=n(u),l=e("./resource/OAuthResource.js"),f=n(l),d=e("./service/TokenStorage.js"),h=n(d),p=e("./interceptor/SecurityInterceptor.js"),v=n(p),g=e("./interceptor/LocaleInterceptor.js"),m=n(g),y=e("./interceptor/DeleteRequestInterceptor.js"),b=n(y),j="clearcode.tm.security";s["default"].$inject=[j+".security","$state"],c["default"].$inject=["$q","$timeout",j+".tokenStorage","clearcode.tm.user.userResource",j+".oauthResource","$translate"],f["default"].$inject=["$http","$q",j+".tokenStorage","OAuthClientSettings"],o["default"].$inject=[j+".oauthResource",j+".tokenStorage","$state","clearcode.tm.form.alertForm","clearcode.tm.pageInfo.pageInfo"],v["default"].$inject=["$q",j+".tokenStorage","$injector"],h["default"].$inject=["$localStorage"],m["default"].$inject=["$window"],b["default"].$inject=["$q","$rootScope","$injector"],angular.module(j,["pascalprecht.translate","ui.router","clearcode.tm.alert","clearcode.tm.tagContainer","clearcode.tm.user","clearcode.tm.pageInfo","clearcode.tm.form","clearcode.tm.update"]).config(["$stateProvider","$httpProvider",function(e,t){
t.interceptors.push(j+".securityInterceptor"),t.interceptors.push(j+".deleteRequestInterceptor"),t.interceptors.push(j+".localeInterceptor"),e.state("signIn",{url:"/sign-in",controller:j+".LoginController",controllerAs:"view",data:{roles:[],secure:!1},templateUrl:"/app/modules/security/views/signIn.html"}).state("accessDenied",{url:"/access-denied",data:{roles:[]},templateUrl:"/app/modules/security/views/accessDenied.html"})}]).run(["$rootScope",j+".authorization","$state",j+".security","clearcode.tm.alert.$alert","clearcode.tm.tagContainer.currentContainer",function(e,t,r,n,a,o){a.addMessagePattern("login.invalid","Login or password is incorrect. Please try again."),a.addMessagePattern("request.error","User with passed email address does not exist."),a.addMessagePattern("request.success","The email with the activation link has been sent successfully."),a.addMessagePattern("changePassword.success","Password has been changed successfully."),a.addMessagePattern("changePassword.error","Sorry, something went wrong. Try to reset your password one more time."),a.addMessagePattern("changePassword.token","Reset password token is required."),a.addMessagePattern("changePassword.notCurrentPassword","This value should be the users current password."),a.addMessagePattern("invalid.email","Your email address is invalid."),a.addMessagePattern("password.different","Repeat password does not match."),a.addMessagePattern("password.both","Both password fields requires at least 8 characters."),a.addMessagePattern("password.first","First password field requires at least 8 characters."),a.addMessagePattern("password.second","Second password field requires at least 8 characters."),e.logout=function(){n.logout().then(function(){o.disableDebugMode(),r.go("signIn")})},e.deleteHeaderNotSupported=!1,e.security=n,e.$on("$stateChangeStart",function(e,n){var a,o,i=void 0!==n.data;i&&(a=void 0!==n.data.secure?n.data.secure:!0,o=void 0!==n.data.roles?n.data.roles:[]),t.authorize(o).then(function(){},function(){a&&r.go("signIn")})})}]).value("$localStorage",localStorage).controller(j+".LoginController",o["default"]).service(j+".authorization",s["default"]).service(j+".security",c["default"]).service(j+".oauthResource",f["default"]).service(j+".tokenStorage",h["default"]).value("OAuthClientSettings",{clientId:"undefined"==typeof OAUTH_CLIENT_ID?"1_1234567890":OAUTH_CLIENT_ID,clientSecret:"undefined"==typeof OAUTH_CLIENT_SECRET?"sec1234567890":OAUTH_CLIENT_SECRET}).factory(j+".securityInterceptor",v["default"]).factory(j+".localeInterceptor",m["default"]).factory(j+".deleteRequestInterceptor",b["default"]),t.exports={MODULE_NAME:j}},{"./controller/LoginController.js":19,"./interceptor/DeleteRequestInterceptor.js":20,"./interceptor/LocaleInterceptor.js":21,"./interceptor/SecurityInterceptor.js":22,"./resource/OAuthResource.js":23,"./service/Authorization.js":25,"./service/Security.js":26,"./service/TokenStorage.js":27}],25:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(t,r){n(this,e),this.security=t,this.state=r}return a(e,[{key:"authorize",value:function(e){var t=this;return this.security.getUser().then(function(){var r=t.security.isAuthenticated();e&&e.length>0&&!t.security.hasAnyRole(e)&&(r||t.state.go("signIn"))})}}]),e}();r["default"]=o},{}],26:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(t,r,a,o,i,s){n(this,e),this.q=t,this.timeout=r,this.user=void 0,this.authenticated=!1,this.tokenStorage=a,this.userResource=o,this.oauthResource=i,this.translate=s,this.checked=!1}return a(e,[{key:"hasUser",value:function(){return void 0!==this.user}},{key:"isAuthenticated",value:function(){return this.authenticated}},{key:"isChecked",value:function(){return this.checked}},{key:"hasRole",value:function(e){return this.authenticated&&void 0!==e?-1!==this.user.roles.indexOf(e)||this.isSuperAdmin():!1}},{key:"isSuperAdmin",value:function(){return-1!==this.user.roles.indexOf("ROLE_SUPER_ADMIN")}},{key:"hasAnyRole",value:function(e){if(!this.authenticated||void 0===e)return!1;for(var t=0;t<e.length;t++)if(this.hasRole(e[t]))return!0;return!1}},{key:"authenticate",value:function(e){this.user=e,this.authenticated=!0,this.translate.use(e.language)}},{key:"logout",value:function(){var e=this.q.defer(),t=this;return this.oauthResource.logout().then(function(){t.user=void 0,t.authenticated=!1,t.tokenStorage.removeItem(),e.resolve()},function(t){e.reject(t)}),e.promise}},{key:"getUser",value:function(e){var t=this,r=this.q.defer();return e===!0&&this.reloadUser(),void 0!==this.user?(r.resolve(this.user),t.authenticate(this.user),r.promise):(void 0!==t.tokenStorage.getItem()?this.isAuthenticated()||this.reloadUser():(t.checked=!0,r.reject()),r.promise)}},{key:"reloadUser",value:function(){var e=this,t=this.q.defer();this.userResource.getMe().then(function(r){e.checked=!0,e.authenticate(r),t.resolve(e.user)},function(){e.checked=!0})}}]),e}();r["default"]=o},{}],27:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=void 0,i=function(){function e(t){n(this,e),o=t}return a(e,[{key:"getItem",value:function(){var e=o.accessToken;return void 0!==e&&(e=JSON.parse(e)),e}},{key:"getToken",value:function(){var t=this.getItem();return e.capitalizeFirstLetter(t.tokenType)+" "+t.accessToken}},{key:"addItem",value:function(e){return o.accessToken=JSON.stringify(e),e}},{key:"removeItem",value:function(){o.removeItem("accessToken")}}],[{key:"capitalizeFirstLetter",value:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}}]),e}();r["default"]=i},{}],28:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a=function o(){n(this,o),this.accessToken=void 0,this.expiresIn=void 0,this.tokenType=void 0,this.scope=void 0,this.refreshToken=void 0};r["default"]=a},{}],29:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(t,r,a,o,i,s,u,c,l,f,d,h,p){var v=this;n(this,e);var g="Tags";this.alert=s,this.state=o,this.stateParams=i,this.triggerResource=r,this.TableParams=c,this.paramConverter=l,this.currentContainer=f,this.tag=t.getEntityObject(),this.tagPromise=void 0,this.triggers=[],this.chosenTriggers=[],this.triggerPromise=void 0,this.formTouched=!1,this.templatesStorage=h,this.templates=h.getAll(),this.template=void 0,this.translate=p,this.variables=[],this.textEditorConfig={},this.isCodeEditorFocused=!1,a.queryAllAvailable(this.stateParams.containerId).then(function(e){v.variables=e.data}),this.textEditorConfig.onLoad=function(e){e.options.variables=v.variables,u.insertVariableIntoCode=function(t){e.doc.replaceSelection("{{ "+t.name+" }}"),e.focus()},e.on("focus",function(){v.isCodeEditorFocused=!0}),e.on("blur",function(){v.isCodeEditorFocused=!1})},u.$on("trigger.add",function(e,t){v.tag.addTrigger(t),v.showTriggerForm=!1,v.validateTriggers=!1}),u.$on("trigger.edit",function(e,t){v.tag.editTrigger(t),v.editTriggerForm=!1,v.validateTriggers=!1}),this.translate(["Place the code"]).then(function(e){v.textEditorConfig.placeholder=e["Place the code"]}),this.currentContainer.getContainer().then(function(){v.currentContainer.$container.hasPermission("noaccess")&&o.go("container"),v.translate([v.getBreadcrumbText(),g]).then(function(e){d.clear().add(v.currentContainer.$container.name,"tags",{containerId:v.currentContainer.$container.id}).add(e[g],"tags",{containerId:v.currentContainer.$container.id}).add(e[v.getBreadcrumbText()]).broadcast()})}),u.$on("pageInfo.reload",function(e,t){v.translate([v.getBreadcrumbText(),g]).then(function(e){d.clear().add(t.name,"tags",{containerId:t.id}).add(e[g],"tags",{containerId:t.id}).add(e[v.getBreadcrumbText()]).broadcast()})})}return a(e,[{key:"hasVariables",value:function(){return angular.isArray(this.variables)&&this.variables.length>0}},{key:"setTagTemplate",value:function(e){return this.tag.template===e?(this.template=void 0,this.tag.template=null,this.formTouched=!1,!1):(this.tag.template=e,void(this.tag.template?(this.template=this.templatesStorage.get(e),this.tag.code=void 0,0===this.template.types.length?this.setTemplateType(e):this.formTouched=!1):this.formTouched=!0))}},{key:"initTagTemplate",value:function(e,t){this.tag.template=e,this.tag.template&&(this.template=this.templatesStorage.get(e),this.tag.code=void 0,0===this.template.types.length?(this.templateFields=this.templatesStorage.getOptions(e),this.template.templateUrl=this.templatesStorage.getTemplateUrl(e),this.tag.templateOptions=t):(this.templateFields=this.templatesStorage.getOptions(e,t.type),this.tag.templateOptions.type=t.type,this.template.templateUrl=this.templatesStorage.getTemplateUrl(e,t.type))),this.formTouched=!0}},{key:"setTemplateType",value:function(e,t){return void 0!==this.tag.templateOptions.type&&this.tag.templateOptions.type===t?!1:(this.templateFields=this.templatesStorage.getOptions(e,t),this.setOptions(),this.tag.templateOptions.type=t,this.template.templateUrl=this.templatesStorage.getTemplateUrl(e,t),void(this.formTouched=!0))}},{key:"setOptions",value:function(){var e=this.templateFields.length;for(this.tag.templateOptions={};e--;)this.tag.templateOptions[this.templateFields[e].name]=this.templateFields[e].hasOwnProperty("value")?this.templateFields[e].value:void 0}},{key:"showExistingTriggers",value:function(){this.chosenTriggers=[],this.prepareExistingTriggersList(),this.showListTriggersForm=!0}},{key:"prepareExistingTriggersList",value:function(){var e=this;this.triggers=[],this.types=["Page View","Click","Event","Form submission"],this.existingTable=new this.TableParams({page:1,count:10,sorting:{name:"asc"}},{total:0,getData:function(t,r){var n=e.paramConverter.list(r.url());n["exclude[]"]=e.tag.triggers.map(function(e){return e.id}),e.triggerResource.query(e.currentContainer.$container.id,n).then(function(e){r.total(e.total),t.resolve(e.data)})}})}},{key:"addExistingTriggers",value:function(){for(var e=this.chosenTriggers.length;e--;)this.tag.triggers.push(this.chosenTriggers[e])}},{key:"submitForm",value:function(e){var t=this;this.tagPromise=e.save(this.stateParams.containerId),this.tagPromise.then(function(){t.alert.success(t.getAlertType(t.stateParams.tagId)),t.currentContainer.makeChanges(),t.state.go("tags",{containerId:t.stateParams.containerId})},function(){t.alert.error("error.invalid")})}},{key:"displayInvalidFormMessage",value:function(){this.validateTag=!0,this.alert.error("error.invalid")}}]),e}();r["default"]=o},{}],30:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e("./BaseController.js"),c=n(u),l=function(e){function t(e,r,n,i,s,u,c,l,f,d,h,p,v){return a(this,t),o(this,Object.getPrototypeOf(t).call(this,e,r,n,i,s,u,c,l,f,d,h,p,v))}return i(t,e),s(t,[{key:"getBreadcrumbText",value:function(){return"Add a new tag"}},{key:"getAlertType",value:function(){return"success.create"}}]),t}(c["default"]);r["default"]=l},{"./BaseController.js":29}],31:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e("./BaseController.js"),c=n(u),l=function(e){function t(e,r,n,i,s,u,c,l,f,d,h,p,v){a(this,t);var g=o(this,Object.getPrototypeOf(t).call(this,e,r,n,i,s,u,c,l,f,d,h,p,v));return g.tagPromise=e.get(s.tagId),g.tagPromise.then(function(e){g.tag=e,g.initTagTemplate(g.tag.template,g.tag.templateOptions)}),g}return i(t,e),s(t,[{key:"getBreadcrumbText",value:function(){return"Configure tag"}},{key:"getAlertType",value:function(){return"success.edit"}}]),t}(c["default"]);r["default"]=l},{"./BaseController.js":29}],32:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a,o,i,s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u="Tags",c=function(){function e(t,r,s,c,l,f,d,h,p,v){var g=this;n(this,e),a=c,o=r,i=h,this.permissions=[],this.containerId=o.containerId,this.translate=v,this.currentContainer=f,this.currentContainer.getContainer().then(function(e){g.currentContainer.$container.hasPermission("view")?g.permissions=g.currentContainer.$container.permissions:p.go("container"),g.translate([u]).then(function(t){d.clear().add(e.name,"tags",{containerId:e.id}).add(t[u]).broadcast()})}),this.tableParams=new t({page:1,count:10,sorting:{name:"asc"}},{total:0,$scope:h,getData:function(e,t){s.query(o.containerId,l.list(t.url())).then(function(r){t.total(r.total),e.resolve(r.data)})}}),this.tableParams.reload(),i.params=this.tableParams,h.$on("ngTableAfterReloadData",function(){g.showTriggers=-1,g.showMenu=-1},!0),h.$watch("params.$params",function(e,t){e!==t&&(h.params.settings().$scope=h,h.params.reload())},!0),i.$on("pageInfo.reload",function(e,t){g.translate([u]).then(function(e){d.clear().add(t.name,"tags",{containerId:t.id}).add(e[u]).broadcast()})})}return s(e,[{key:"removeTag",value:function(e){var t=this;e.remove().then(function(){a.success("success.remove"),t.currentContainer.makeChanges(),1===t.tableParams.data.length&&t.tableParams.page()>1?t.tableParams.page(t.tableParams.page()-1):t.tableParams.reload()},function(){a.error("error.remove"),t.tableParams.reload()})}},{key:"changeStatus",value:function(e){var t=this;e.changeStatus(this.containerId).then(function(){t.currentContainer.makeChanges(),a.success("status.change")},function(){a.error("status.failed")})}},{key:"toggleActionMenu",value:function(e){-1!==this.permissions.indexOf("edit")&&(this.showMenu=this.showMenu===e?-1:e,this.showTriggers=-1)}},{key:"toggleTriggerList",value:function(e){this.showMenu=-1,this.showTriggers=this.isRowExpanded(e)?-1:e}},{key:"isRowExpanded",value:function(e){return this.showTriggers===e}}]),e}();r["default"]=c},{}],33:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(e){var t=function(){function t(){n(this,t),this.id=void 0,this.name=void 0,this.code=void 0,this.noScriptUri=void 0,this.triggers=[],this.updatedAt=void 0,this.priority=0,this.documentWrite=!1,this.disableInDebugMode=!1,this.respectVisitorsPrivacy=!1,this.isActive=!0,this.template=null,this.templateOptions={},this.statusChangePending=!1}return a(t,[{key:"addTrigger",value:function(e){this.triggers.push(e)}},{key:"editTrigger",value:function(e){for(var t=this.triggers.length;t--;)if(this.triggers[t].id===e.id)return this.triggers[t]=e,!0;return!1}},{key:"removeTrigger",value:function(e){var t=this.triggers.indexOf(e);return t>-1?(this.triggers.splice(t,1),!0):!1}},{key:"removeTriggerById",value:function(e){for(var t=this.triggers.length;t--;)if(this.triggers[t].id===e)return this.triggers.splice(t,1),!0;return!1}},{key:"save",value:function(t){var r,n={},a=["id","updatedAt","statusChangePending"];void 0===this.template?a.push("templateOptions"):(a.push("code"),a.push("noScriptUri"),a.push("documentWrite"));for(var o in this)if(!angular.isFunction(this[o])&&this.hasOwnProperty(o)&&-1===a.indexOf(o))if("triggers"===o){var i=[];for(var s in this[o])this[o][s]instanceof Object&&i.push(this[o][s].id);n[o]=i}else n[o]=this[o];return r=void 0===this.id?e.post(t,n):e.put(this.id,n)}},{key:"remove",value:function(){return void 0===this.id?!1:e["delete"](this.id)}},{key:"changeStatus",value:function(e){var t=this,r=angular.copy(this);r.isActive=!r.isActive,this.statusChangePending=!0;var n=r.save(e).then(function(){t.isActive=!t.isActive})["finally"](function(){t.statusChangePending=!1});return n}}]),t}();return t};r["default"]=o},{}],34:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=e("../entity/TemplateType.js"),s=n(i),u=function(){var e=(0,s["default"])(),t=function(){function t(e,r){a(this,t),this.id=e,this.name=r,this.brandUrl=void 0,this.templateUrl=void 0,this.type=void 0,this.types=[],this.fields=[]}return o(t,[{key:"addTextField",value:function(e){var t=e?e:{};return t.type="text",this.fields.push(t),this}},{key:"addHiddenField",value:function(e,t){var r={};return r.name=e,r.value=t,r.type="hidden",this.fields.push(r),this}},{key:"addSelectField",value:function(e){var t=e?e:{};return t.type="select",this.fields.push(t),this}},{key:"addType",value:function(t,r){var n=new e(t,r);return this.types.push(n),n}},{key:"addBrand",value:function(e){return this.brandUrl=e,this}},{key:"addTemplateUrl",value:function(e){return this.templateUrl=e,this}}]),t}();return t};r["default"]=u},{"../entity/TemplateType.js":35}],35:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){var e=function(){function e(t,r){n(this,e),this.id=t,this.name=r,this.templateUrl=void 0,this.fields=[]}return a(e,[{key:"addTextField",value:function(e){var t=e?e:{};return t.type="text",this.fields.push(t),this}},{key:"addHiddenField",value:function(e,t){var r={};return r.name=e,r.value=t,r.type="hidden",this.fields.push(r),this}},{key:"addTemplateUrl",value:function(e){return this.templateUrl=e,this}}]),e}();return e};r["default"]=o},{}],36:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=e("../entity/Template.js"),s=n(i),u=(0,s["default"])(),c=function(){function e(){a(this,e),this.collection=[]}return o(e,[{key:"add",value:function(e,t){var r=new u(e,t);return this.collection.push(r),r}},{key:"get",value:function(e){for(var t=this.collection.length;t--;)if(this.collection[t].id===e)return this.collection[t];return!1}},{key:"getAll",value:function(){return this.collection}},{key:"$get",value:function(){return this}}]),e}();r["default"]=c},{"../entity/Template.js":34}],37:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=e("../entity/Tag.js"),s=n(i),u=function(e){var t=(0,s["default"])(this),r=new t;r.id=e.id,r.name=e.name,r.code=e.code,r.noScriptUri=e.no_script_uri,r.priority=e.priority,r.updatedAt=e.updated_at,r.documentWrite=e.document_write,r.disableInDebugMode=e.disable_in_debug_mode,r.isActive=e.is_active,r.respectVisitorsPrivacy=e.respect_visitors_privacy,null!==e.template?(r.template=e.template,r.templateOptions=e.template_options):r.template=void 0;for(var n in e.triggers)e.triggers[n]instanceof Object&&r.addTrigger(e.triggers[n]);return r},c=function(e,t){return e=angular.isArray(e)?e:[e],e.concat(t)},l=function(){function e(t,r){a(this,e),this.http=t,this.q=r}return o(e,[{key:"getEntityObject",value:function(){var e=(0,s["default"])(this);return new e}},{key:"get",value:function(e){var t=this,r=this.q.defer();return this.http({method:"GET",url:"/api/tags/"+e,transformResponse:c(this.http.defaults.transformResponse,function(e,r,n){return 400>n?u.call(t,e.data):e})}).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise}},{key:"query",value:function(e,t){var r=this,n=this.q.defer();return this.http({method:"GET",url:"/api/containers/"+e+"/tags",params:t,transformResponse:c(this.http.defaults.transformResponse,function(e){for(var t in e.data)e.data[t]instanceof Object&&(e.data[t]=u.call(r,e.data[t]));return e})}).success(function(e){n.resolve(e)}).error(function(e){n.reject(e)}),n.promise}},{key:"delete",value:function(e){var t=this.q.defer();return this.http({method:"DELETE",url:"/api/tags/"+e}).success(function(e){t.resolve(e)}).error(function(e){t.reject(e)}),t.promise}},{key:"post",value:function(e,t){var r=this,n=this.q.defer();return this.http({method:"POST",url:"/api/containers/"+e+"/tags",data:t,transformResponse:c(this.http.defaults.transformResponse,function(e,t,n){return 400>n?u.call(r,e.data):e})}).success(function(e){n.resolve(e)}).error(function(e){n.reject(e)}),n.promise}},{key:"put",value:function(e,t){var r=this,n=this.q.defer();return this.http({method:"PUT",url:"/api/tags/"+e,data:t,transformResponse:c(this.http.defaults.transformResponse,function(e,t,n){return 400>n?u.call(r,e.data):e})}).success(function(e){n.resolve(e)}).error(function(e){n.reject(e)}),n.promise}}]),e}();r["default"]=l},{"../entity/Tag.js":33}],38:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(e,t,r){for(var n=e.length;n--;)if(e[n][t]===r)return e[n];return!1},i=function(){function e(t){n(this,e),this.collection=t.getAll()}return a(e,[{key:"getAll",value:function(){return this.collection}},{key:"get",value:function(e){for(var t=this.collection.length;t--;)if(this.collection[t].id===e)return this.collection[t];return!1}},{key:"getOptions",value:function(e,t){var r=o(this.collection,"id",e);if(r){if(t){var n=o(r.types,"id",t);return n&&n.hasOwnProperty("fields")?n.fields:!1}return r.hasOwnProperty("fields")?r.fields:!1}return!1}},{key:"getTemplateUrl",value:function(e,t){var r=o(this.collection,"id",e);if(t){var n=o(r.types,"id",t);return n?n.templateUrl:!1}return r.templateUrl}}]),e}();r["default"]=i},{}],39:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var a=e("./controllers/CreateController.js"),o=n(a),i=e("./controllers/EditController.js"),s=n(i),u=e("./controllers/ManageController.js"),c=n(u),l=e("./resource/TagResource.js"),f=n(l),d=e("./services/Templates.js"),h=n(d),p=e("./providers/TemplatesProvider.js"),v=n(p),g="clearcode.tm.tag",m="clearcode.tm.trigger",y="clearcode.tm.variable",b="app/modules/tag";h["default"].$inject=[g+".$template"],f["default"].$inject=["$http","$q"],c["default"].$inject=["ngTableParams","$stateParams",g+".tagResource","clearcode.tm.alert.alert","clearcode.tm.tagContainer.paramConverter","clearcode.tm.tagContainer.currentContainer","clearcode.tm.pageInfo.pageInfo","$scope","$state","$translate"],o["default"].$inject=[g+".tagResource",m+".triggerResource",y+".variableResource","$state","$stateParams","clearcode.tm.alert.alert","$scope","ngTableParams","clearcode.tm.tagContainer.paramConverter","clearcode.tm.tagContainer.currentContainer","clearcode.tm.pageInfo.pageInfo",g+".templatesStorage","$translate"],s["default"].$inject=[g+".tagResource",m+".triggerResource",y+".variableResource","$state","$stateParams","clearcode.tm.alert.alert","$scope","ngTableParams","clearcode.tm.tagContainer.paramConverter","clearcode.tm.tagContainer.currentContainer","clearcode.tm.pageInfo.pageInfo",g+".templatesStorage","$translate"],t.exports={MODULE_NAME:g},angular.module(g,["pascalprecht.translate","ui.router","ngTable","clearcode.tm.alert","clearcode.tm.pageInfo","clearcode.tm.tagContainer","clearcode.tm.trigger","ui.codemirror"]).config(["$stateProvider",function(e){e.state("tags",{url:"/containers/{containerId}/tags",controller:g+".ManageController as view",templateUrl:b+"/views/manage.html",data:{roles:["ROLE_SUPER_ADMIN"],hasContainerList:!0}}).state("tagCreate",{url:"/containers/{containerId}/tag-create",controller:g+".CreateController as view",templateUrl:b+"/views/create.html",data:{roles:["ROLE_SUPER_ADMIN"],hasContainerList:!0}}).state("tagEdit",{url:"/containers/{containerId}/tag/edit/{tagId}",controller:g+".EditController as view",templateUrl:b+"/views/edit.html",data:{roles:["ROLE_SUPER_ADMIN"],hasContainerList:!0}})}]).run(["clearcode.tm.alert.$alert",function(e){e.addMessagePattern("trigger.close","You are trying to close unsaved trigger."),e.addMessagePattern("status.change","Tag status was changed successfully"),e.addMessagePattern("status.failed","Sorry, something went wrong.")}]).provider(g+".$template",v["default"]).controller(g+".ManageController",c["default"]).controller(g+".CreateController",o["default"]).controller(g+".EditController",s["default"]).service(g+".tagResource",f["default"]).service(g+".templatesStorage",h["default"])},{"./controllers/CreateController.js":30,"./controllers/EditController.js":31,"./controllers/ManageController.js":32,"./providers/TemplatesProvider.js":36,"./resource/TagResource.js":37,"./services/Templates.js":38}],40:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a,o,i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s="Add a container",u=function(){function e(t,r,i,u,c){n(this,e),this.container=t.getEntityObject(),a=r,o=i,this.translate=c,this.translate([s]).then(function(e){u.clear().add(e[s]).broadcast()})}return i(e,[{key:"submitForm",value:function(e){this.containerPromise=e.save(),this.containerPromise.then(function(e){o.success("container.create"),a.go("containerExplanation",{containerId:e.id})},function(){o.error("error.invalid")})}},{key:"displayInvalidFormMessage",value:function(){this.validateContainer=!0,o.error("error.invalid")}}]),e}();r["default"]=u},{}],41:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a,o,i,s,u,c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l="Options",f=function(){function e(t,r,c,f,d,h,p,v){var g=this;n(this,e);var m=this;a=r,o=c,i=f,s=d,u=p,this.pageInfo=h,this.container=t.getEntityObject(),this.containerPromise=t.get(o.containerId),this.containerPromise.then(function(e){m.container=e}),this.translate=v,s.getContainer().then(function(){s.$container.hasPermission("noaccess")&&a.go("container"),g.refreshBreadcrumb(l,s.$container)}),u.$on("pageInfo.reload",function(e,t){g.refreshBreadcrumb(l,t)})}return c(e,[{key:"removeContainer",value:function(){this.container.remove().then(function(){i.success("success.remove"),a.go("container")},function(){i.error("error.remove")})}},{key:"submitForm",value:function(e){var t=this;this.containerPromise=e.save(),this.containerPromise.then(function(e){t.refreshBreadcrumb(l,e),s.get(o.containerId),i.success("success.edit"),a.go("containerEdit",{containerId:o.containerId})},function(){i.error("error.invalid")})}},{key:"displayInvalidFormMessage",value:function(){this.validateContainer=!0,i.error("error.invalid")}},{key:"refreshBreadcrumb",value:function(e,t){var r=this.pageInfo;this.translate([e]).then(function(n){r.clear().add(t.name,"tags",{containerId:t.id}).add(n[e]).broadcast()})}}]),e}();r["default"]=f},{}],42:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");
}Object.defineProperty(r,"__esModule",{value:!0});var a,o="Container created successfully",i=function s(e,t,r,i,u){var c=this;n(this,s),i.makeChanges(),this.translate=u,this.translate([o]).then(function(e){r.clear().add(e[o]).broadcast()}),a=t,this.container=e.getEntityObject(),this.containerPromise=e.get(a.containerId),this.containerPromise.then(function(e){c.container=e})};r["default"]=i},{}],43:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a,o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function(){function e(t,r,o,i,s){n(this,e),a=o,s.disableDebugMode(),this.tableParams=new t({page:1,count:10,sorting:{name:"asc"}},{total:0,getData:function(e,t){r.query(i.list(t.url())).then(function(r){t.total(r.total),e.resolve(r.data)})}})}return o(e,[{key:"removeContainer",value:function(e){var t=this;e.remove().then(function(){a.success("success.remove"),1===t.tableParams.data.length&&t.tableParams.page(t.tableParams.page()-1),t.tableParams.reload()},function(){a.error("error.remove"),t.tableParams.reload()})}}]),e}();r["default"]=i},{}],44:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a,o,i,s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=function(){function e(t,r,s,u,c){n(this,e),this.permissionsPromise=void 0,a=c,o=s,i=u,this.usersTable=new t({page:1,count:10,sorting:{name:"asc"}},{total:0,getData:function(e,t){a.query(o.$container.id,r.list(t.url())).then(function(r){t.total(r.total),e.resolve(r.data)})}})}return s(e,[{key:"setPermission",value:function(e,t){var r=angular.copy(e);r.permissions=t,this.permissionsPromise=r.save(o.$container.id),this.permissionsPromise.then(function(t){e.permissions=t.permissions},function(){i.error("permissions.error")})}},{key:"isValid",value:function(e,t){return e.permissions!==t&&-1===e.user.roles.indexOf("ROLE_SUPER_ADMIN")}}]),e}();r["default"]=u},{}],45:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a=function o(e,t){var r=this;n(this,o),this.privacyPromise=t.getPrivacyOptOut(e.containerId).then(function(e){r.code=e.code})};r["default"]=a},{}],46:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(e){var t=function(){function t(){n(this,t),this.id=void 0,this.name=void 0,this.code=void 0,this.version=void 0,this.hasUnpublishedChanges=void 0,this.publishedAt=void 0,this.permissions=void 0,this.delay=void 0,this.websites=void 0}return a(t,[{key:"save",value:function(){var t,r={},n=["id","code","version","hasUnpublishedChanges","publishedAt","permissions","websites"];for(var a in this)!angular.isFunction(this[a])&&this.hasOwnProperty(a)&&-1===n.indexOf(a)&&(r[a]=this[a]);return void 0===this.id?(delete r.delay,t=e.post(r)):t=e.put(this.id,r),t}},{key:"remove",value:function(){return void 0===this.id?!1:e["delete"](this.id)}},{key:"hasPermission",value:function(e){return-1!==this.permissions.indexOf(e)}},{key:"getPermission",value:function(){var e=[{value:"operator",text:"Owner"},{value:"publish",text:"Publish"},{value:"edit",text:"Edit"},{value:"view",text:"View"}];for(var t in e)if(-1!==this.permissions.indexOf(e[t].value))return e[t].text}}]),t}();return t};r["default"]=o},{}],47:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(e){var t=function(){function t(){n(this,t),this.user=void 0,this.permissions=void 0}return a(t,[{key:"save",value:function(t){var r,n={};return n=angular.copy(this),n.user=n.user.id,r=e.put(t,n)}}]),t}();return t};r["default"]=o},{}],48:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=e("../entity/Container.js"),s=n(i),u=function(e){var t=(0,s["default"])(this),r=new t;if(void 0!==e){r.id=e.id,r.name=e.name,r.description=e.description,r.code=e.code,r.version=e.version,r.hasUnpublishedChanges=e.has_unpublished_changes,r.publishedAt=e.published_at,r.permissions=e.permissions,r.delay=e.delay,r.websites=[];for(var n=0;n<e.websites.length;n++){var a=this.WebsiteResource.getEntityObject();a.url=e.websites[n].url,a.parameterType=e.websites[n].parameter_type,r.websites.push(a)}}return r},c=function(e,t){return e=angular.isArray(e)?e:[e],e.concat(t)},l=function(){function e(t,r,n){a(this,e),this.http=t,this.q=r,this.WebsiteResource=n}return o(e,[{key:"getEntityObject",value:function(){var e=(0,s["default"])(this);return new e}},{key:"get",value:function(e){var t=this,r=this.q.defer();return this.http({method:"GET",url:"/api/containers/"+e,transformResponse:c(this.http.defaults.transformResponse,function(e){return u.call(t,e.data)})}).success(function(e){r.resolve(e)}).error(function(){r.reject()}),r.promise}},{key:"query",value:function(e){var t=this,r=this.q.defer();return this.http({method:"GET",url:"/api/containers",params:e,transformResponse:c(this.http.defaults.transformResponse,function(e){for(var r in e.data)e.data[r]instanceof Object&&(e.data[r]=u.call(t,e.data[r]));return e})}).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise}},{key:"delete",value:function(e){var t=this.q.defer();return this.http({method:"DELETE",url:"/api/containers/"+e}).success(function(e){t.resolve(e)}).error(function(e){t.reject(e)}),t.promise}},{key:"post",value:function(e){var t=this,r=this.q.defer();return this.http({method:"POST",url:"/api/containers",data:e,transformResponse:c(this.http.defaults.transformResponse,function(e){return u.call(t,e.data)})}).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise}},{key:"put",value:function(e,t){var r=this,n=this.q.defer();return this.http({method:"PUT",url:"/api/containers/"+e,data:t,transformResponse:c(this.http.defaults.transformResponse,function(e){return u.call(r,e.data)})}).success(function(e){n.resolve(e)}).error(function(e){n.reject(e)}),n.promise}},{key:"publishVersion",value:function(e){var t=this.q.defer();return this.http({method:"POST",url:"/api/containers/"+e+"/version-publish"}).success(function(e){t.resolve(e)}).error(function(e){t.reject(e)}),t.promise}},{key:"restoreVersion",value:function(e){var t=this.q.defer();return this.http({method:"POST",url:"/api/containers/"+e+"/version-restore"}).success(function(e){t.resolve(e)}).error(function(e){t.reject(e)}),t.promise}},{key:"getPrivacyOptOut",value:function(e){var t=this.q.defer();return this.http({method:"GET",url:"containers/"+e+"/privacy"}).success(function(e){t.resolve(e)}).error(function(e){t.reject(e)}),t.promise}}]),e}();r["default"]=l},{"../entity/Container.js":46}],49:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=e("../entity/Permission.js"),s=n(i),u=function(e){var t=["operator","publish","edit","view","noaccess"],r=(0,s["default"])(this),n=new r;if(n.user=e.user,e.permissions instanceof Object){for(var a in t)if(-1!==e.permissions.indexOf(t[a])){n.permissions=t[a];break}}else n.permissions=e.permissions;return n},c=function(e,t){return e=angular.isArray(e)?e:[e],e.concat(t)},l=function(){function e(t,r){a(this,e),this.http=t,this.q=r}return o(e,[{key:"getEntityObject",value:function(){var e=(0,s["default"])(this);return new e}},{key:"query",value:function(e,t){var r=this,n=this.q.defer();return this.http({method:"GET",url:"/api/containers/"+e+"/permissions",params:t,transformResponse:c(this.http.defaults.transformResponse,function(e){for(var t in e.data)e.data[t]instanceof Object&&(e.data[t]=u.call(r,e.data[t]));return e})}).success(function(e){n.resolve(e)}).error(function(e){n.reject(e)}),n.promise}},{key:"put",value:function(e,t){var r=this,n=this.q.defer();return this.http({method:"PUT",data:t,url:"api/containers/"+e+"/permissions",transformResponse:c(this.http.defaults.transformResponse,function(e,t,n){return 400>n?u.call(r,e.data):e})}).success(function(e){n.resolve(e)}).error(function(e){n.reject(e)}),n.promise}}]),e}();r["default"]=l},{"../entity/Permission.js":47}],50:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a,o,i,s,u,c,l,f=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),d="preview",h="debug",p=function(){function e(t,r,f,d,h,p,v,g){n(this,e),a=t,o=r,i=f,s=d,u=h,this.$container=void 0,c=p,this.types=void 0,this.debugMode=!1,this.previewedContainer=void 0,this.translate=g,l=v}return f(e,[{key:"get",value:function(e){var t=this;return e=this.getId(e),u.currentContainerLoading=!0,this.containerPromise=o.get(e).then(function(e){return t.$container=e,u.currentContainerLoading=!1,t.verifyDebugMode(),void 0===t.types&&(t.types=t.setTypes()),t.$container}),this.containerPromise}},{key:"getId",value:function(e){return void 0!==e?e:a.containerId}},{key:"getContainer",value:function(){return void 0===this.containerPromise?this.get():this.containerPromise}},{key:"publish",value:function(){var e=this,t=o.publishVersion(this.getId());return u.currentContainerLoading=!0,t.then(function(){i.success("success.publish"),e.get(),u.currentContainerLoading=!1},function(){i.error("container.error"),u.currentContainerLoading=!1})}},{key:"canRestore",value:function(){var e=this.$container;return e?e.publishedAt&&e.hasUnpublishedChanges===!0:!1}},{key:"isDirty",value:function(){var e=this.$container;return e&&e.hasUnpublishedChanges}},{key:"isPublished",value:function(){var e=this.$container;return e?e.publishedAt&&e.hasUnpublishedChanges===!1:!1}},{key:"makeChanges",value:function(){var e=this.$container;return e?(e.hasUnpublishedChanges=!0,!0):void 0}},{key:"restore",value:function(){var e=this,t=o.restoreVersion(this.getId());u.currentContainerLoading=!0,t.then(function(){i.success("success.restore"),e.get(),s.includes("tags")||s.includes("tagEdit")||s.includes("tagCreate")?s.go("tags",{containerId:e.getId()},{reload:!0}):s.includes("triggers")||s.includes("triggerCreate")||s.includes("triggerEdit")?s.go("triggers",{containerId:e.getId()},{reload:!0}):s.go("containerEdit",{containerId:e.getId()},{reload:!0}),u.currentContainerLoading=!1},function(){i.error("container.error")})}},{key:"verifyDebugMode",value:function(){if(this.isDebugModeEnabled()){var e=c.get(h);if(e===this.$container.id){this.debugMode=!0,this.previewedContainer=this.$container;var t=this;this.translate(["Now Previewing"]).then(function(e){t.previewedContainerText=e["Now Previewing"]})}else this.disableDebugMode()}}},{key:"isDebugModeEnabled",value:function(){var e=c.get(h),t=c.get(d);return void 0!==e&&void 0!==t&&e===t}},{key:"enableDebugMode",value:function(){this.debugMode=!0,this.previewedContainer=this.$container;var e=this;this.translate(["Now Previewing"]).then(function(t){e.previewedContainerText=t["Now Previewing"]}),c.put(d,this.$container.id),c.put(h,this.$container.id)}},{key:"disableDebugMode",value:function(){this.debugMode=!1,this.previewedContainer=void 0,c.remove(d),c.remove(h)}},{key:"setTypes",value:function(){return l.query(this.getId()).then(function(e){for(var t=e.length,r=[];t--;)r[t]={name:e[t].name,type:e[t].type};return r})}},{key:"hasPermission",value:function(e){return this.getContainer().then(function(t){return t.hasPermission(e)})}}]),e}();r["default"]=p},{}],51:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(){n(this,e)}return a(e,[{key:"list",value:function(e){return{limit:e.count,offset:(e.page-1)*e.count}}}]),e}();r["default"]=o},{}],52:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var a=e("./controllers/ManageController.js"),o=n(a),i=e("./controllers/CreateController.js"),s=n(i),u=e("./controllers/EditController.js"),c=n(u),l=e("./controllers/ExplanationController.js"),f=n(l),d=e("./controllers/PermissionsController.js"),h=n(d),p=e("./controllers/PrivacyController.js"),v=n(p),g=e("./resource/ContainerResource.js"),m=n(g),y=e("./resource/PermissionResource.js"),b=n(y),j=e("./service/ParamConverter.js"),P=n(j),w=e("./service/CurrentContainer.js"),C=n(w),O="clearcode.tm.tagContainer",_="clearcode.tm.debug",E="app/modules/tagContainer";m["default"].$inject=["$http","$q",_+".websiteResource"],b["default"].$inject=["$http","$q"],C["default"].$inject=["$stateParams",O+".containerResource","clearcode.tm.alert.alert","$state","$rootScope","$cookieStore","clearcode.tm.condition.conditionResource","$translate"],o["default"].$inject=["ngTableParams",O+".containerResource","clearcode.tm.alert.alert",O+".paramConverter","clearcode.tm.tagContainer.currentContainer"],s["default"].$inject=[O+".containerResource","$state","clearcode.tm.alert.alert","clearcode.tm.pageInfo.pageInfo","$translate"],c["default"].$inject=[O+".containerResource","$state","$stateParams","clearcode.tm.alert.alert","clearcode.tm.tagContainer.currentContainer","clearcode.tm.pageInfo.pageInfo","$scope","$translate"],f["default"].$inject=[O+".containerResource","$stateParams","clearcode.tm.pageInfo.pageInfo","clearcode.tm.tagContainer.currentContainer","$translate"],h["default"].$inject=["ngTableParams",O+".paramConverter",O+".currentContainer","clearcode.tm.alert.alert",O+".permissionResource"],v["default"].$inject=["$stateParams",O+".containerResource"],angular.module(O,["pascalprecht.translate","ui.router","ngTable","ngCookies","clearcode.tm.condition","clearcode.tm.alert","clearcode.tm.pageInfo","clearcode.tm.user",_]).run(["$rootScope",O+".currentContainer","$stateParams","clearcode.tm.alert.$alert",function(e,t,r,n){e.currentContainerLoading=!0,e.currentContainer=t;var a=function(n){if(n!==r.containerId){var a=t.get(n);a.then(function(t){e.$broadcast("pageInfo.reload",t)})}};e.$on("$stateChangeStart",function(e,t,r){a(r.containerId)}),n.addMessagePattern("success.restore","Well done! Action completed successfully."),n.addMessagePattern("container.create","Container has been created successfully."),n.addMessagePattern("container.error","Sorry, something went wrong."),n.addMessagePattern("success.publish","Container has been published! Changes are now live!"),n.addMessagePattern("permissions.error","Permissions can not be changed.")}]).config(["$stateProvider",function(e){e.state("container",{url:"/containers",controller:O+".ManageController as view",templateUrl:E+"/views/manage.html",data:{roles:["ROLE_SUPER_ADMIN"],hasContainerList:!1,permission:["view"]}}).state("containerCreate",{url:"/containers-create",controller:O+".CreateController as view",templateUrl:E+"/views/create.html",data:{roles:["ROLE_SUPER_ADMIN"],hasContainerList:!1,permission:["edit"]}}).state("containerExplanation",{url:"/containers-explanation/{containerId}",controller:O+".ExplanationController as view",templateUrl:E+"/views/explanation.html",data:{roles:["ROLE_SUPER_ADMIN"],hasContainerList:!0,permission:["owner"]}}).state("containerEdit",{url:"/containers-edit/{containerId}",controller:O+".EditController as view",templateUrl:E+"/views/options.html",data:{roles:["ROLE_SUPER_ADMIN"],hasContainerList:!0,permission:["edit"]}})}]).controller(O+".ManageController",o["default"]).controller(O+".CreateController",s["default"]).controller(O+".EditController",c["default"]).controller(O+".ExplanationController",f["default"]).controller(O+".PermissionsController",h["default"]).controller(O+".PrivacyController",v["default"]).service(O+".containerResource",m["default"]).service(O+".permissionResource",b["default"]).service(O+".paramConverter",P["default"]).service(O+".currentContainer",C["default"]),t.exports={MODULE_NAME:O}},{"./controllers/CreateController.js":40,"./controllers/EditController.js":41,"./controllers/ExplanationController.js":42,"./controllers/ManageController.js":43,"./controllers/PermissionsController.js":44,"./controllers/PrivacyController.js":45,"./resource/ContainerResource.js":48,"./resource/PermissionResource.js":49,"./service/CurrentContainer.js":50,"./service/ParamConverter.js":51}],53:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(t,r,a,o,i,s,u,c,l,f){var d=this;n(this,e);var h="Triggers";this.required=void 0,this.variables=void 0,this.actions=void 0,this.triggerPromise=void 0,this.triggerResource=r,this.conditionResource=a,this.scope=t,this.stateParams=o,this.state=i,this.alert=s,this.currentContainer=u,this.Condition=c,this.PageInfo=l,this.typesArrayPromise=c.getArrayOfTypes(),this.trigger=r.getEntityObject(),this.condition=a.getEntityObject(),this.translate=f,t.$on("pageInfo.reload",function(e,t){d.translate([d.getBreadcrumbText(),h]).then(function(e){l.clear().add(t.name,"tags",{containerId:t.id}).add(e[h],"triggers",{containerId:t.id}).add(e[d.getBreadcrumbText()]).broadcast()})})}return a(e,[{key:"setType",value:function(e){var t=this;if(void 0===this.typesArray[e])throw new Error("Invalid type");this.trigger.type=e,this.trigger.conditions=[],this.Condition.getVariables(e).then(function(e){t.variables=e}),this.Condition.getActions(e).then(function(e){t.actions=e}),this.Condition.getRequired(e).then(function(e){t.required=e;for(var r=t.required.length;r--;)t.trigger.conditions.push({variable:t.required[r].name,condition:t.actions[0].type,value:""})})}},{key:"addCondition",value:function(){this.condition=this.conditionResource.getEntityObject(),this.condition.variable=this.variables[0].name,this.condition.condition=this.actions[0].type,this.trigger.addCondition(this.condition)}},{key:"validateTrigger",value:function(e){this.scope[e.$name].$setPristine();var t=this.trigger.conditions.length;if(this.scope[e.$name].name.$valid){if(0!==t)for(;t--;)if(this.scope[e.$name]["conditionValue["+t+"]"].$invalid)return!1;return!0}return!1}},{key:"isTypeRequired",value:function(e){return void 0!==this.required&&-1!==this.required.map(function(e){return e.name}).indexOf(e)}},{key:"getVariableName",value:function(e){var t=this.variables.map(function(e){return e.name}).indexOf(e);return-1===t?(t=this.required.map(function(e){return e.name}).indexOf(e),-1!==t?this.required[t].name:!1):this.variables[t].name}},{key:"getConditionName",value:function(e){var t=this.actions.map(function(e){return e.name}).indexOf(e);return-1!==t?this.actions[t].name:!1}},{key:"leaveFormInsideTag",value:function(){var e=this;return this.translate([this.getBreadcrumbText()]).then(function(t){e.PageInfo.clear().add(e.currentContainer.$container.name,"tags",{containerId:e.currentContainer.$container.id}).add(t[e.getBreadcrumbText()]).broadcast()}),!1}},{key:"submitForm",value:function(e){var t=this;this.triggerPromise=e.save(this.stateParams.containerId),this.triggerPromise.then(function(){t.currentContainer.makeChanges(),t.alert.success(t.getAlertType()),t.state.go("triggers",{containerId:t.stateParams.containerId})},function(){t.alert.error("error.invalid")})}},{key:"displayInvalidFormMessage",value:function(e){e.validateTriggers=!0,this.alert.error("error.invalid")}}]),e}();r["default"]=o},{}],54:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e("./BaseController.js"),c=n(u),l="Triggers",f=function(e){function t(e,r,n,i,s,u,c,f,d,h){a(this,t);var p=o(this,Object.getPrototypeOf(t).call(this,e,r,n,i,s,u,c,f,d,h));return p.typesArrayPromise.then(function(e){p.typesArray=e,p.setType(0)}),c.getContainer().then(function(){c.$container.hasPermission("edit")||s.go("triggers",{containerId:i.containerId}),p.translate([p.getBreadcrumbText(),l]).then(function(e){d.clear().add(c.$container.name,"tags",{containerId:c.$container.id}).add(e[l],"triggers",{containerId:c.$container.id}).add(e[p.getBreadcrumbText()]).broadcast()})}),p}return i(t,e),s(t,[{key:"getBreadcrumbText",value:function(){return"Add a new trigger"}},{key:"getAlertType",value:function(){return"success.create"}},{key:"addTrigger",value:function(e,t){var r=this;this.triggerPromise=t.save(this.stateParams.containerId),this.triggerPromise.then(function(t){r.scope[e.$name].$setPristine(),r.trigger=r.triggerResource.getEntityObject(),r.scope.$emit("trigger.add",t)},function(){})}}]),t}(c["default"]);r["default"]=f},{"./BaseController.js":53}],55:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e("./BaseController.js"),c=n(u),l="Triggers",f=function(e){function t(e,r,n,i,s,u,c,f,d,h){a(this,t);var p=o(this,Object.getPrototypeOf(t).call(this,e,r,n,i,s,u,c,f,d,h));return p.triggerPromise=r.get(i.triggerId),p.triggerPromise.then(function(e){p.trigger=e,p.typesArrayPromise.then(function(e){p.typesArray=e,p.Condition.getVariables(p.trigger.type).then(function(e){p.variables=e}),p.Condition.getActions(p.trigger.type).then(function(e){p.actions=e}),p.Condition.getRequired(p.trigger.type).then(function(e){p.required=e})})}),p.currentContainer.getContainer().then(function(){p.currentContainer.$container.hasPermission("noaccess")&&p.state.go("container"),p.translate([p.getBreadcrumbText(),l]).then(function(e){d.clear().add(p.currentContainer.$container.name,"tags",{containerId:p.currentContainer.$container.id}).add(e[l],"triggers",{containerId:p.currentContainer.$container.id}).add(e[p.getBreadcrumbText()]).broadcast()})}),p}return i(t,e),s(t,[{key:"getBreadcrumbText",value:function(){return"Configure trigger"}},{key:"getAlertType",value:function(){return"success.edit"}}]),t}(c["default"]);r["default"]=f},{"./BaseController.js":53}],56:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e("./BaseController.js"),c=n(u),l=function(e){function t(e,r,n,i,s,u,c,l,f){return a(this,t),o(this,Object.getPrototypeOf(t).call(this,e,r,n,i,null,s,u,c,l,f))}return i(t,e),s(t,[{key:"initTrigger",value:function(e){var t=this;this.triggerPromise=this.triggerResource.get(e),this.triggerPromise.then(function(e){t.trigger=e,t.typesArrayPromise.then(function(e){t.typesArray=e,t.Condition.getVariables(t.trigger.type).then(function(e){t.variables=e}),t.Condition.getActions(t.trigger.type).then(function(e){t.actions=e}),t.Condition.getRequired(t.trigger.type).then(function(e){t.required=e})})})}},{key:"getBreadcrumbText",value:function(){return"Configure trigger"}},{key:"getAlertType",value:function(){return"success.edit"}},{key:"submitForm",value:function(e){var t=this;this.triggerPromise=e.save(this.stateParams.containerId),this.triggerPromise.then(function(e){t.currentContainer.makeChanges(),t.alert.success("trigger.edit"),t.scope.$emit("trigger.edit",e)},function(){t.alert.error("error.invalid")})}}]),t}(c["default"]);r["default"]=l},{"./BaseController.js":53}],57:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a,o,i,s,u,c,l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),f="Triggers",d=function(){function e(t,r,l,d,h,p,v,g,m,y,b){var j=this;n(this,e),a=d,i=r,o=l,s=p,u=g,c=m,this.typesArrayPromise=c.getArrayOfTypes(),this.typesArrayPromise.then(function(e){j.typesArray=e}),this.translate=b,this.containerId=i.containerId,this.tableParams=new t({page:1,count:10,sorting:{name:"asc"}},{total:0,getData:function(e,t){o.query(i.containerId,h.list(t.url())).then(function(r){t.total(r.total),e.resolve(r.data)})}}),s.getContainer().then(function(){s.$container.hasPermission("view")||y.go("container"),j.translate([f]).then(function(e){v.clear().add(s.$container.name,"tags",{containerId:s.$container.id}).add(e[f]).broadcast()})}),u.$on("pageInfo.reload",function(e,t){j.translate([f]).then(function(e){v.clear().add(t.name,"tags",{containerId:t.id}).add(e[f]).broadcast()})})}return l(e,[{key:"removeTrigger",value:function(e){var t=this;e.remove().then(function(){a.success("success.remove"),s.makeChanges(),1===t.tableParams.data.length&&t.tableParams.page()>1?t.tableParams.page(t.tableParams.page()-1):t.tableParams.reload()},function(){a.error("error.remove"),t.tableParams.reload()})}}]),e}();r["default"]=d},{}],58:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(e){var t=function(){function t(){n(this,t),this.id=void 0,this.name=void 0,this.type=0,this.conditions=[],this.tagsCount=void 0,this.updatedAt=void 0}return a(t,[{key:"addCondition",value:function(e){this.conditions.push(e)}},{key:"removeCondition",value:function(e){this.conditions.splice(e,1)}},{key:"save",value:function(t){var r,n={},a=["id","updatedAt","createdAt","tagsCount"];for(var o in this)if(!angular.isFunction(this[o])&&this.hasOwnProperty(o)&&-1===a.indexOf(o))if("conditions"===o){var i=[];for(var s in this[o])this[o][s]instanceof Object&&i.push({variable:this[o][s].variable,condition:this[o][s].condition,value:this[o][s].value});n[o]=i}else n[o]=this[o];return r=void 0===this.id?e.post(t,n):e.put(this.id,n)}},{key:"remove",value:function(){return void 0===this.id?!1:e["delete"](this.id)}}]),t}();return t};r["default"]=o},{}],59:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=e("../entity/Trigger.js"),s=n(i),u=function(e){var t=(0,s["default"])(this),r=new t;return void 0!==e&&(r.id=e.id,r.name=e.name,r.type=e.type,r.conditions=e.conditions,r.tagsCount=e.tags_count,r.updatedAt=e.updated_at),r},c=function(e,t){return e=angular.isArray(e)?e:[e],e.concat(t)},l=function(){function e(t,r){a(this,e),this.http=t,this.q=r}return o(e,[{key:"getEntityObject",value:function(){var e=(0,s["default"])(this);return new e}},{key:"get",value:function(e){var t=this,r=this.q.defer();return this.http({method:"GET",url:"/api/triggers/"+e,transformResponse:c(this.http.defaults.transformResponse,function(e,r,n){return 400>n?u.call(t,e.data):e})}).success(function(e){
r.resolve(e)}).error(function(e){r.reject(e)}),r.promise}},{key:"query",value:function(e,t){var r=this,n=this.q.defer();return this.http({method:"GET",url:"/api/containers/"+e+"/triggers",params:t,transformResponse:c(this.http.defaults.transformResponse,function(e){for(var t in e.data)e.data[t]instanceof Object&&(e.data[t]=u.call(r,e.data[t]));return e})}).success(function(e){n.resolve(e)}).error(function(e){n.reject(e)}),n.promise}},{key:"delete",value:function(e){var t=this.q.defer();return this.http({method:"DELETE",url:"/api/triggers/"+e}).success(function(e){t.resolve(e)}).error(function(e){t.reject(e)}),t.promise}},{key:"post",value:function(e,t){var r=this,n=this.q.defer();return this.http({method:"POST",url:"/api/containers/"+e+"/triggers",data:t,transformResponse:c(this.http.defaults.transformResponse,function(e,t,n){return 400>n?u.call(r,e.data):e})}).success(function(e){n.resolve(e)}).error(function(e){n.reject(e)}),n.promise}},{key:"put",value:function(e,t){var r=this,n=this.q.defer();return this.http({method:"PUT",url:"/api/triggers/"+e,data:t,transformResponse:c(this.http.defaults.transformResponse,function(e,t,n){return 400>n?u.call(r,e.data):e})}).success(function(e){n.resolve(e)}).error(function(e){n.reject(e)}),n.promise}}]),e}();r["default"]=l},{"../entity/Trigger.js":58}],60:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var a=e("./controllers/CreateController.js"),o=n(a),i=e("./controllers/EditController.js"),s=n(i),u=e("./controllers/ManageController.js"),c=n(u),l=e("./controllers/EditInsideTagController.js"),f=n(l),d=e("./resource/TriggerResource.js"),h=n(d),p="clearcode.tm.trigger",v="clearcode.tm.condition",g="/app/modules/trigger";c["default"].$inject=["ngTableParams","$stateParams",p+".triggerResource","clearcode.tm.alert.alert","clearcode.tm.tagContainer.paramConverter","clearcode.tm.tagContainer.currentContainer","clearcode.tm.pageInfo.pageInfo","$scope","clearcode.tm.condition.condition","$state","$translate"],o["default"].$inject=["$scope",p+".triggerResource",v+".conditionResource","$stateParams","$state","clearcode.tm.alert.alert","clearcode.tm.tagContainer.currentContainer","clearcode.tm.condition.condition","clearcode.tm.pageInfo.pageInfo","$translate"],s["default"].$inject=["$scope",p+".triggerResource",v+".conditionResource","$stateParams","$state","clearcode.tm.alert.alert","clearcode.tm.tagContainer.currentContainer","clearcode.tm.condition.condition","clearcode.tm.pageInfo.pageInfo","$translate"],f["default"].$inject=["$scope",p+".triggerResource",v+".conditionResource","$stateParams","clearcode.tm.alert.alert","clearcode.tm.tagContainer.currentContainer","clearcode.tm.condition.condition","clearcode.tm.pageInfo.pageInfo","$translate"],h["default"].$inject=["$http","$q"],angular.module(p,["pascalprecht.translate","ui.router","ngTable","clearcode.tm.alert","clearcode.tm.pageInfo","clearcode.tm.tagContainer","clearcode.tm.condition"]).config(["$stateProvider",function(e){e.state("triggers",{url:"/containers/{containerId}/triggers",controller:p+".ManageController as view",templateUrl:g+"/views/manage.html",data:{roles:["ROLE_SUPER_ADMIN"],hasContainerList:!0}}).state("triggerCreate",{url:"/containers/{containerId}/trigger-create",controller:p+".CreateController as triggerForm",templateUrl:g+"/views/create.html",data:{roles:["ROLE_SUPER_ADMIN"],hasContainerList:!0}}).state("triggerEdit",{url:"/containers/{containerId}/trigger/edit/{triggerId}",controller:p+".EditController as triggerForm",templateUrl:g+"/views/edit.html",data:{roles:["ROLE_SUPER_ADMIN"],hasContainerList:!0}})}]).run(["clearcode.tm.alert.$alert",function(e){e.addMessagePattern("trigger.create","Trigger has been created successfully."),e.addMessagePattern("trigger.edit","Trigger has been updated successfully.")}]).controller(p+".CreateController",o["default"]).controller(p+".EditController",s["default"]).controller(p+".ManageController",c["default"]).controller(p+".EditInsideTagController",f["default"]).service(p+".triggerResource",h["default"]),t.exports={MODULE_NAME:p}},{"./controllers/CreateController.js":54,"./controllers/EditController.js":55,"./controllers/EditInsideTagController.js":56,"./controllers/ManageController.js":57,"./resource/TriggerResource.js":59}],61:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=void 0,i=void 0,s=function(){function e(t,r,a){n(this,e),o=t,i=r,this.version=a}return a(e,[{key:"updateAvailable",value:function(){return void 0!==this.version.latest&&!this.version.isUpToDate()}},{key:"startUpdate",value:function(){o.setSession().then(function(e){i.location.href=e.url})}}]),e}();r["default"]=s},{}],62:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t){return{restrict:"A",scope:{stgVersion:"@"},link:function(r){e.current=r.stgVersion,void 0===e.latest&&t.getLatest(e.current).then(function(t){e.latest=t.version})}}};r["default"]=n},{}],63:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(t,r,a){n(this,e),this.http=t,this.q=r,this.location=a}return a(e,[{key:"setSession",value:function(){var e=this.q.defer();return this.http({method:"GET",url:"admin-tools/update"}).success(function(t){e.resolve(t)}).error(function(t){e.reject(t)}),e.promise}},{key:"getLatest",value:function(e){var t=this.q.defer(),r=this.location.host();return this.http({method:"GET",url:"//download.7tag.org/version.json",params:{version:e,domain:r},headers:{"Access-Control-Request-Headers":void 0}}).success(function(e){t.resolve(e)}).error(function(e){t.reject(e)}),t.promise}}]),e}();r["default"]=o},{}],64:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(){n(this,e),this.current=void 0,this.latest=void 0}return a(e,[{key:"isUpToDate",value:function(){return void 0!==this.current&&this.current===this.latest}}]),e}();r["default"]=o},{}],65:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var a=e("./controllers/VersionController.js"),o=n(a),i=e("./resources/UpdateResource.js"),s=n(i),u=e("./services/Version.js"),c=n(u),l=e("./directives/setVersionDirective.js"),f=n(l),d="clearcode.tm.update";o["default"].$inject=[d+".updateResource","$window",d+".version"],s["default"].$inject=["$http","$q","$location"],f["default"].$inject=[d+".version","clearcode.tm.update.updateResource"],c["default"].$inject=["$rootScope"],angular.module(d,[]).controller(d+".VersionController",o["default"]).service(d+".updateResource",s["default"]).service(d+".version",c["default"]).directive("stgSetVersion",f["default"]),t.exports={MODULE_NAME:d}},{"./controllers/VersionController.js":61,"./directives/setVersionDirective.js":62,"./resources/UpdateResource.js":63,"./services/Version.js":64}],66:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(t,r,a,o,i,s){n(this,e);var u="My account";this.ACTIVATION_SET_PASSWORD="ACTIVATION_SET_PASSWORD",this.ROLE_API="ROLE_API",this.ROLE_USER="ROLE_USER",this.ROLE_SUPER_ADMIN="ROLE_SUPER_ADMIN",this.ROLE_CONTAINERS_CREATE="ROLE_CONTAINERS_CREATE",this.alert=r,this.state=o,this.userResource=t,this.userPromise=void 0,this.user=t.getEntity(),i([u]).then(function(e){a.clear().add(e[u]).broadcast()}),s.success("LANGUAGE_CHANGE_MESSAGE","user.change_language")}return a(e,[{key:"displayRoleSectionForUser",value:function(){return!this.state.includes("editProfile")}},{key:"displayPasswordSection",value:function(){return this.activation?this.activation===this.ACTIVATION_SET_PASSWORD:!1}},{key:"setUser",value:function(e){var t=this;this.state.includes("editProfile")?this.userPromise=this.userResource.getMe():(this.role=void 0,this.createContainerRole=void 0,this.userPromise=this.userResource.get(e)),this.userPromise.then(function(e){t.user=e,t.role=t.getUserRole(),t.createContainerRole=-1!==t.user.roles.indexOf(t.ROLE_CONTAINERS_CREATE)})}},{key:"getUserRole",value:function(){return this.user.hasRole(this.ROLE_SUPER_ADMIN)?this.ROLE_SUPER_ADMIN:this.user.hasRole(this.ROLE_API)?this.ROLE_API:this.ROLE_USER}},{key:"setRole",value:function(e){var t=this.user.roles.indexOf(e);return-1!==t?(this.user.roles.splice(t,1),!1):(this.user.roles.push(e),!0)}},{key:"submitForm",value:function(e){var t=this;this.state.includes("editProfile")?this.userPromise=e.saveMe():(e.roles=[this.role],this.role===this.ROLE_USER&&this.createContainerRole&&e.roles.push(this.ROLE_CONTAINERS_CREATE),this.userPromise=e.save()),this.userPromise.then(function(){t.alert.success("user.save"),t.state.includes("editProfile")||t.state.go("users")},function(){t.alert.error("user.invalid")})}},{key:"displayInvalidFormMessage",value:function(){this.alert.error("error.invalid")}}]),e}();r["default"]=o},{}],67:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o="My account",i=void 0,s=void 0,u=void 0,c=void 0,l=void 0,f=function(){function e(t,r,a,f,d,h){n(this,e),i=t,s=r,u=a,c=d,l=h,this.validationForce=!1,this.changePasswordPromise=void 0,this.translate=h,this.currentPassword="",this.plainPassword={first:"",second:""},l([o]).then(function(e){f.clear().add(e[o]).broadcast()})}return a(e,[{key:"submitForm",value:function(e,t){var r={current_password:e,plainPassword:t};this.changePasswordPromise=i.changePassword(r),this.changePasswordPromise.then(function(){s.success("password.change"),u.go("container")},function(){s.error("error.invalid")})}},{key:"displayInvalidFormMessage",value:function(e){this.validationForce=!0,e.first!==e.second?(c.changePasswordForm.first.$invalid=!0,c.changePasswordForm.second.$invalid=!0,l(["Passwords have to be identical"]).then(function(e){c.changePasswordForm.first.$error.first=[e["Passwords have to be identical"]]}),c.changePasswordForm.second.$error.second=[],s.error("error.invalid")):void 0===e.first||void 0===e.second?s.error("password.both"):s.error("error.invalid")}}]),e}();r["default"]=f},{}],68:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e("./BaseController.js"),c=n(u),l="Add a user",f="Users",d="ACTIVATION_EMAIL",h="ACTIVATION_SET_PASSWORD",p="ROLE_USER",v=void 0,g=void 0,m=function(e){function t(e,r,n,i,s,u,c){a(this,t);var h=o(this,Object.getPrototypeOf(t).call(this,e,r,n,i,u,c));return v=s,g=u,h.activation=d,h.role=p,h.password={first:"",second:""},g([l,f]).then(function(e){n.clear().add(e[f],"users").add(e[l]).broadcast()}),h}return i(t,e),s(t,[{key:"createUserFormValidation",value:function(){var e=!1;return v.createUserForm.first.$dirty=!0,v.createUserForm.second.$dirty=!0,this.password.first!==this.password.second?(v.createUserForm.first.$invalid=!0,v.createUserForm.second.$invalid=!0,g(["Passwords have to be identical"]).then(function(e){v.createUserForm.first.$error.first=[e["Passwords have to be identical"]]}),v.createUserForm.second.$error.second=[],e=!1):this.password.first.length<8||this.password.second.length<8?(v.createUserForm.first.$invalid=!0,v.createUserForm.second.$invalid=!0,g(["Password needs to have minimum 8 characters"]).then(function(e){v.createUserForm.first.$error.first=[e["Password needs to have minimum 8 characters"]]}),v.createUserForm.second.$error.second=[],e=!1):this.activation===h&&(e=!0),v.createUserForm.$valid||(e=!1),v.createUserForm.$valid&&this.activation===d&&(e=!0),e||this.alert.error("user.invalid"),e}},{key:"submitForm",value:function(e){var t=this;e.roles=[this.role],this.role===this.ROLE_USER&&this.createContainerRole&&e.roles.push(this.ROLE_CONTAINERS_CREATE),this.activation===h&&(e.plainPassword=this.password),this.userPromise=e.save(),this.userPromise.then(function(){t.alert.success("user.save"),t.state.go("users")},function(){t.alert.error("user.invalid")})}}]),t}(c["default"]);r["default"]=m},{"./BaseController.js":66}],69:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e("./BaseController.js"),c=n(u),l="Edit user",f="Users",d=void 0,h=void 0,p=void 0,v=function(e){function t(e,r,n,i,s,u,c,v,g){a(this,t);var m=o(this,Object.getPrototypeOf(t).call(this,e,n,i,s,c,v));return d=u,h=s,p=c,m.security=g,h.includes("editProfile")?m.setUser():(m.activation=m.ACTIVATION_SET_PASSWORD,m.password={first:"",second:""},m.setUser(r.userId),p([l,f]).then(function(e){i.clear().add(e[f],"users").add(e[l]).broadcast()})),m}return i(t,e),s(t,[{key:"editUserFormValidation",value:function(){return d.editUserForm.first.$dirty=!0,d.editUserForm.second.$dirty=!0,""===this.password.first&&""===this.password.second?!0:this.password.first!==this.password.second?(d.editUserForm.first.$invalid=!0,d.editUserForm.second.$invalid=!0,p(["Passwords have to be identical"]).then(function(e){d.editUserForm.first.$error.first=[e["Passwords have to be identical"]]}),d.editUserForm.second.$error.second=[],!1):this.password.first.length<8||this.password.second.length<8?(d.editUserForm.first.$invalid=!0,d.editUserForm.second.$invalid=!0,p(["Password needs to have minimum 8 characters"]).then(function(e){d.editUserForm.first.$error.first=[e["Password needs to have minimum 8 characters"]]}),d.editUserForm.second.$error.second=[],!1):!!d.editUserForm.$valid}},{key:"submitForm",value:function(e){var t=this;e.roles=[this.role],this.role===this.ROLE_USER&&this.createContainerRole&&e.roles.push(this.ROLE_CONTAINERS_CREATE),this.hasOwnProperty("password")&&""!==this.password.first&&(e.plainPassword=this.password),h.includes("editProfile")?this.userPromise=e.saveMe():this.userPromise=e.save(),this.userPromise.then(function(){t.security.getUser(!0),t.alert.success("user.save"),t.state.go("container")},function(){t.alert.error("user.invalid")})}}]),t}(c["default"]);r["default"]=v},{"./BaseController.js":66}],70:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a,o,i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s="Users",u=function(){function e(t,r,i,u,c,l,f){n(this,e),this.translate=f,a=i,o=r,c.disableDebugMode(),this.tableParams=new t({page:1,count:10,sorting:{name:"asc"}},{total:0,getData:function(e,t){r.query(u.list(t.url())).then(function(r){t.total(r.total),e.resolve(r.data)})}}),this.translate([s]).then(function(e){l.clear().add(e[s]).broadcast()})}return i(e,[{key:"removeUser",value:function(e){var t=this;e.remove().then(function(){a.success("success.remove"),1===t.tableParams.data.length&&t.tableParams.page(t.tableParams.page()-1),t.tableParams.reload()},function(){a.error("error.remove"),t.tableParams.reload()})}},{key:"resetPassword",value:function(e){var t=this,r={username:e.email};this.resetPromise=o.resetPassword(r),this.resetPromise.then(function(){a.success("user.reset"),t.tableParams.reload()},function(){})}}]),e}();r["default"]=u},{}],71:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a,o,i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s="My account",u=function(){function e(t,r,i,u,c,l){var f=this;n(this,e),a=t,this.scope=r,o=u,this.validationForce=!1,this.translate=i,this.window=c,this.languages=o.getLanguages(),this.languages.length||(this.loadTranslationsPromise=o.loadAvailableTranslations(),this.loadTranslationsPromise.then(function(){f.languages=o.languages})),i([s]).then(function(e){l.clear().add(e[s]).broadcast()})}return i(e,[{key:"submitForm",value:function(e){var t=this,r=this.window.localStorage.NG_TRANSLATE_LANG_KEY,n=r?r:"en";this.othersSettingsPromise=e.saveOthersSettings(),this.othersSettingsPromise.then(function(e){t.translate.use(e.language).then(function(){e.language!==n?(t.window.localStorage.LANGUAGE_CHANGE_MESSAGE=!0,t.window.location.reload()):a.success("user.save")})},function(){a.error("error.invalid")})}}]),e}();r["default"]=u},{}],72:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a,o,i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s="Forgot your password?",u=function(){function e(t,r,i,u,c){n(this,e),this.email="",this.translate=c,this.alert=i,a=t,o=r,o.getStorage().clean(),this.validationForce=!1,this.resetPromise=void 0,this.success=!1,this.translate([s]).then(function(e){u.clear().add(e[s]).broadcast()})}return i(e,[{key:"submitForm",value:function(e){var t=this,r={username:e};this.resetPromise=a.resetPassword(r),this.resetPromise.then(function(){o.getStorage().clean(),t.success=!0,t.translate(["The email with the activation link has been sent successfully."]).then(function(e){t.formTitle=e["The email with the activation link has been sent successfully."]})},function(){o.getStorage().clean(),o.error("request.error"),t.alert.error("error.invalid")})}},{key:"displayInvalidFormMessage",value:function(){this.validationForce=!0,this.alert.error("error.invalid"),o.getStorage().clean(),o.error("invalid.email")}}]),e}();r["default"]=u},{}],73:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a,o,i,s,u,c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l="Change your password",f=function(){function e(t,r,c,f,d,h,p){n(this,e),this["new"]={first:void 0,second:void 0},this.validationForce=!1,this.changePasswordPromise=void 0,this.translate=p,a=t,o=r,i=c,s=f,u=h,""===i.token&&(o.go("signIn"),s.error("changePassword.token")),this.translate([l]).then(function(e){d.clear().add(e[l]).broadcast()})}return c(e,[{key:"submitForm",value:function(e){var t={plainPassword:e};this.changePasswordPromise=a.setPassword(t,i.token),this.changePasswordPromise.then(function(){o.go("signIn"),s.success("changePassword.success")},function(){s.error("changePassword.error")})}},{key:"displayInvalidFormMessage",value:function(e){this.validationForce=!0,e.first!==e.second?(u.resetPasswordForm.first.$invalid=!0,u.resetPasswordForm.second.$invalid=!0,this.translate(["Passwords have to be identical"]).then(function(e){u.resetPasswordForm.first.$error.first=[e["Passwords have to be identical"]]}),u.resetPasswordForm.second.$error.second=[]):void 0!==e.first&&void 0!==e.second||s.error("password.both")}}]),e}();r["default"]=f},{}],74:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(e){var t=function(){function t(){n(this,t),this.id=void 0,this.email=void 0,this.firstName=void 0,this.lastName=void 0,this.displayName=void 0,this.roles=[],this.status=!1,this.createdAt=void 0,this.language=void 0}return a(t,[{key:"hasRole",value:function(e){return-1!==this.roles.indexOf(e)}},{key:"save",value:function(){var t,r={},n=["id","displayName","status","createdAt","language"],a=["email"];for(var o in this)!angular.isFunction(this[o])&&this.hasOwnProperty(o)&&-1===n.indexOf(o)&&(void 0!==this.id&&-1!==a.indexOf(o)||(r[o]=this[o]));return t=void 0===this.id?e.post(r):e.put(this.id,r)}},{key:"saveMe",value:function(){var t,r={},n=["id","displayName","roles","status","createdAt","email","language"];for(var a in this)!angular.isFunction(this[a])&&this.hasOwnProperty(a)&&-1===n.indexOf(a)&&(r[a]=this[a]);return t=e.putMe(r)}},{key:"saveOthersSettings",value:function(){var t,r={},n=["id","displayName","roles","status","createdAt","email","firstName","lastName"];for(var a in this)!angular.isFunction(this[a])&&this.hasOwnProperty(a)&&-1===n.indexOf(a)&&(r[a]=this[a]);return t=e.othersSettingsMe(r)}},{key:"remove",value:function(){return void 0===this.id?!1:e["delete"](this.id)}}]),t}();return t};r["default"]=o},{}],75:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=e("../entities/User.js"),s=n(i),u="/api/users/me/change-password",c="/api/reset-password/request",l="/api/reset-password/token/",f="en",d=function(e){var t=this.getEntity();return void 0!==e&&(t.id=e.id,t.email=e.email,t.firstName=e.first_name,t.lastName=e.last_name,t.displayName=e.display_name,t.roles=e.roles,t.status=e.status,t.createdAt=e.created_at,null===e.language?t.language=f:t.language=e.language),t},h=function(e,t){return e=angular.isArray(e)?e:[e],e.concat(t)},p=function(){function e(t,r){a(this,e),this.http=t,this.q=r}return o(e,[{key:"getEntity",value:function(){var e=(0,s["default"])(this);return new e}},{key:"get",value:function(e){var t=this,r=this.q.defer();return this.http({method:"GET",url:"/api/users/"+e,transformResponse:h(this.http.defaults.transformResponse,function(e,r,n){return 400>n?d.call(t,e.data):e})}).success(function(e){r.resolve(e)}).error(function(){r.reject()}),r.promise}},{key:"getMe",value:function(){var e=this,t=this.q.defer();return this.http({method:"GET",url:"/api/users/me",transformResponse:h(this.http.defaults.transformResponse,function(t,r,n){return 400>n?d.call(e,t.data):t})}).success(function(e){t.resolve(e)}).error(function(e){t.reject(e)}),t.promise}},{key:"query",value:function(e){var t=this,r=this.q.defer();return this.http({method:"GET",url:"/api/users",params:e,transformResponse:h(this.http.defaults.transformResponse,function(e){if(status<400)for(var r in e.data)e.data[r]instanceof Object&&(e.data[r]=d.call(t,e.data[r]));return e})}).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise}},{key:"delete",value:function(e){var t=this.q.defer();return this.http({method:"DELETE",url:"/api/users/"+e}).success(function(e){t.resolve(e)}).error(function(e){t.reject(e)}),t.promise}},{key:"post",value:function(e){var t=this,r=this.q.defer();return this.http({method:"POST",url:"/api/users",data:e,transformResponse:h(this.http.defaults.transformResponse,function(e,r,n){return 400>n?d.call(t,e.data):e})}).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise}},{key:"put",value:function(e,t){var r=this,n=this.q.defer();return this.http({method:"PUT",url:"/api/users/"+e,data:t,transformResponse:h(this.http.defaults.transformResponse,function(e,t,n){return 400>n?d.call(r,e.data):e})}).success(function(e){n.resolve(e)}).error(function(e){n.reject(e)}),n.promise}},{key:"putMe",value:function(e){var t=this,r=this.q.defer();return this.http({method:"PUT",url:"/api/users/me",data:e,transformResponse:h(this.http.defaults.transformResponse,function(e,r,n){return 400>n?d.call(t,e.data):e})}).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise}},{key:"othersSettingsMe",value:function(e){var t=this,r=this.q.defer();return this.http({method:"PUT",url:"/api/users/me/others-settings",data:e,transformResponse:h(this.http.defaults.transformResponse,function(e,r,n){return 400>n?d.call(t,e.data):e})}).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise}},{key:"changePassword",value:function(e){var t=this.q.defer();return this.http({method:"POST",data:e,url:u}).success(function(e){t.resolve(e)}).error(function(e){t.reject(e)}),t.promise}},{key:"resetPassword",value:function(e){var t=this.q.defer();return this.http({method:"POST",data:e,url:c}).success(function(e){t.resolve(e)}).error(function(e){t.reject(e)}),t.promise}},{key:"setPassword",value:function(e,t){var r=this.q.defer();return this.http({method:"POST",data:e,url:l+t}).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise}}]),e}();r["default"]=p},{"../entities/User.js":74}],76:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var a=e("./controllers/CreateController.js"),o=n(a),i=e("./controllers/EditController.js"),s=n(i),u=e("./controllers/ManageController.js"),c=n(u),l=e("./controllers/OthersSettingsController.js"),f=n(l),d=e("./controllers/ChangePasswordController.js"),h=n(d),p=e("./controllers/ResetRequestController.js"),v=n(p),g=e("./controllers/SetPasswordController.js"),m=n(g),y=e("./resources/UserResource.js"),b=n(y),j="clearcode.tm.user",P="app/modules/user";o["default"].$inject=[j+".userResource","clearcode.tm.alert.alert","clearcode.tm.pageInfo.pageInfo","$state","$scope","$translate","clearcode.tm.alert.refreshAlert"],s["default"].$inject=[j+".userResource","$stateParams","clearcode.tm.alert.alert","clearcode.tm.pageInfo.pageInfo","$state","$scope","$translate","clearcode.tm.alert.refreshAlert","clearcode.tm.security.security"],c["default"].$inject=["ngTableParams",j+".userResource","clearcode.tm.alert.alert","clearcode.tm.tagContainer.paramConverter","clearcode.tm.tagContainer.currentContainer","clearcode.tm.pageInfo.pageInfo","$translate"],h["default"].$inject=["clearcode.tm.user.userResource","clearcode.tm.alert.alert","$state","clearcode.tm.pageInfo.pageInfo","$scope","$translate"],f["default"].$inject=["clearcode.tm.alert.alert","$scope","$translate","clearcode.tm.translation.translation","$window","clearcode.tm.pageInfo.pageInfo"],v["default"].$inject=[j+".userResource","clearcode.tm.form.alertForm","clearcode.tm.alert.alert","clearcode.tm.pageInfo.pageInfo","$translate"],m["default"].$inject=[j+".userResource","$state","$stateParams","clearcode.tm.alert.alert","clearcode.tm.pageInfo.pageInfo","$scope","$translate"],b["default"].$inject=["$http","$q"],angular.module(j,["pascalprecht.translate","ui.router","ngTable","clearcode.tm.alert","clearcode.tm.pageInfo","clearcode.tm.form","clearcode.tm.tagContainer","clearcode.tm.security"]).run(["clearcode.tm.alert.$alert",function(e){e.addMessagePattern("user.save","User account has been saved successfully."),e.addMessagePattern("user.change_language","The language has been changed"),e.addMessagePattern("password.change","Your password has been changed successfully."),e.addMessagePattern("user.invalid","Sorry, something went wrong."),e.addMessagePattern("user.reset","Email with activation link has been sent."),e.addMessagePattern("user.others","Other settings has been saved successfully.")}]).config(["$stateProvider",function(e){e.state("users",{url:"/users",controller:j+".ManageController as view",templateUrl:P+"/views/manage.html",data:{roles:["ROLE_SUPER_ADMIN"],hasContainerList:!1}}).state("userCreate",{url:"/users-create",controller:j+".CreateController as view",templateUrl:P+"/views/create.html",data:{roles:["ROLE_SUPER_ADMIN"],hasContainerList:!1}}).state("userEdit",{url:"/users-edit/{userId}",controller:j+".EditController as view",templateUrl:P+"/views/edit.html",data:{roles:["ROLE_SUPER_ADMIN"],hasContainerList:!1}}).state("editProfile",{url:"/profile",controller:j+".EditController as view",controllerAs:"view",data:{roles:["ROLE_SUPER_ADMIN"],secure:!0},templateUrl:"/app/modules/user/views/profile.html"}).state("resetPassword",{url:"/reset-password",controller:j+".ResetRequestController",controllerAs:"view",data:{roles:[],secure:!1},templateUrl:"/app/modules/user/views/resetPassword.html"}).state("resetConfirm",{url:"/reset-password/token/{token}",controller:j+".SetPasswordController",controllerAs:"view",data:{roles:[],secure:!1},templateUrl:"/app/modules/user/views/setPassword.html"})}]).controller(j+".CreateController",o["default"]).controller(j+".EditController",s["default"]).controller(j+".ManageController",c["default"]).controller(j+".OthersSettingsController",f["default"]).controller(j+".ChangePasswordController",h["default"]).controller(j+".ResetRequestController",v["default"]).controller(j+".SetPasswordController",m["default"]).service(j+".userResource",b["default"]),
t.exports={MODULE_NAME:j}},{"./controllers/ChangePasswordController.js":67,"./controllers/CreateController.js":68,"./controllers/EditController.js":69,"./controllers/ManageController.js":70,"./controllers/OthersSettingsController.js":71,"./controllers/ResetRequestController.js":72,"./controllers/SetPasswordController.js":73,"./resources/UserResource.js":75}],77:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(t,r,a,o,i,s,u,c,l,f,d){var h=this;n(this,e),this.variable=t.getEntityObject(),this.typeResource=r,o.$on("pageInfo.reload",function(e,t){f([h.getBreadcrumbText()]).then(function(e){a.clear().add(t.name,"tags",{containerId:t.id}).add(e[h.getBreadcrumbText()],"variables",{containerId:t.id}).broadcast()})}),this.variableFormProvider=i,this.currentContainer=s,this.condition=d,this.stateParams=u,this.alert=c,this.state=l,this.translate=f,this.formTouched=!1}return a(e,[{key:"getVariableTypes",value:function(){var e=this;this.typesPromise=this.typeResource.query(),this.typesPromise.then(function(t){if(e.types=t.data,e.variable.type&&void 0===e.variable.type.id)for(var r=0;r<e.types.length;r++)if(e.variable.type===e.types[r].id){e.variable.type=e.types[r],e.formTouched=!0;break}})}},{key:"setVariableType",value:function(e){this.variable.type=e,this.variable.value="",this.formTouched=!0}},{key:"getConfigurationTemplate",value:function(){var e=void 0!==this.variable.type.id?this.variable.type.id:this.variable.type;return this.variableFormProvider.getType(e).templateUrl}},{key:"submitForm",value:function(e){var t=this;this.variablePromise=e.save(this.stateParams.containerId),this.variablePromise.then(function(){t.currentContainer.makeChanges(),t.condition.refresh(),t.alert.success(t.getAlertType()),t.state.go("variables",{containerId:t.stateParams.containerId})},function(){t.alert.error("error.invalid")})}},{key:"displayInvalidFormMessage",value:function(){this.validateVariable=!0,this.alert.error("error.invalid")}}]),e}();r["default"]=o},{}],78:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e("./BaseController.js"),c=n(u),l="Variables",f=function(e){function t(e,r,n,i,s,u,c,f,d,h,p){a(this,t);var v=o(this,Object.getPrototypeOf(t).call(this,e,r,n,i,s,u,c,f,d,h,p));return v.variable=e.getEntityObject(),v.getVariableTypes(),u.getContainer().then(function(){u.$container.hasPermission("edit")||d.go("triggers",{containerId:c.containerId}),v.translate([v.getBreadcrumbText(),l]).then(function(e){n.clear().add(u.$container.name,"tags",{containerId:u.$container.id}).add(e[l],"variables",{containerId:u.$container.id}).add(e[v.getBreadcrumbText()]).broadcast()})}),v}return i(t,e),s(t,[{key:"getBreadcrumbText",value:function(){return"Add a new variable"}},{key:"getAlertType",value:function(){return"success.create"}}]),t}(c["default"]);r["default"]=f},{"./BaseController.js":77}],79:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e("./BaseController.js"),c=n(u),l="Variables",f=function(e){function t(e,r,n,i,s,u,c,f,d,h,p){a(this,t);var v=o(this,Object.getPrototypeOf(t).call(this,e,r,n,i,s,u,c,f,d,h,p));return v.variablePromise=e.get(c.variableId),v.variablePromise.then(function(e){v.variable=e,v.getVariableTypes()}),v.currentContainer.getContainer().then(function(){v.currentContainer.$container.hasPermission("noaccess")&&v.state.go("container"),v.translate([v.getBreadcrumbText(),l]).then(function(e){n.clear().add(v.currentContainer.$container.name,"tags",{containerId:v.currentContainer.$container.id}).add(e[l],"variables",{containerId:v.currentContainer.$container.id}).add(e[v.getBreadcrumbText()]).broadcast()})}),v.formTouched=!0,v}return i(t,e),s(t,[{key:"getBreadcrumbText",value:function(){return"Configure variable"}},{key:"getAlertType",value:function(){return"success.edit"}}]),t}(c["default"]);r["default"]=f},{"./BaseController.js":77}],80:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a,o,i,s,u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c="Variables",l=function(){function e(t,r,u,l,f,d,h,p,v,g){var m=this;n(this,e),a=l,o=r,i=d,s=p,this.permissions=[],this.containerId=o.containerId,i.getContainer().then(function(e){i.$container.hasPermission("view")?m.permissions=i.$container.permissions:v.go("container"),g([c]).then(function(t){h.clear().add(e.name,"variable",{containerId:e.id}).add(t[c]).broadcast()})}),this.tableParams=new t({page:1,count:10,sorting:{name:"asc"}},{total:0,getData:function(e,t){u.query(o.containerId,f.list(t.url())).then(function(r){t.total(r.total),e.resolve(r.data)})}}),s.$on("pageInfo.reload",function(e,t){g([c]).then(function(e){h.clear().add(t.name,"variables",{containerId:t.id}).add(e[c]).broadcast()})})}return u(e,[{key:"removeVariable",value:function(e){var t=this;e.remove().then(function(){a.success("success.remove"),i.makeChanges(),1===t.tableParams.data.length&&t.tableParams.page()>1?t.tableParams.page(t.tableParams.page()-1):t.tableParams.reload()},function(){a.error("error.remove"),t.tableParams.reload()})}}]),e}();r["default"]=l},{}],81:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e){e.stopPropagation(),e.cancelBubble=!0}function o(){var e=angular.element(document.getElementById("variables-list.html")).html();return l(e)(c)}function i(e,t){var r=l(u.getTemplate())(c),n=void 0;e.wrap(u.getElementWrapper()),n=e.parent(),n.append(r),n.append(t)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=void 0,c=void 0,l=void 0,f=function(){function e(t,r,a,o,i){var s=this;n(this,e),l=t,c=a,u=o,i.allVariables().then(function(e){s.variables=e})}return s(e,[{key:"init",value:function(e,t){this.element=e,this.ngModel=t;var r=o();this.ulElement=r.children(),i(this.element,r)}},{key:"toggleVariablesList",value:function(e){var t=this.element.val().trim();this.isVariablesListVisible()?this.element.val(u.removeVariablePrompt(t)):this.element.val(u.addVariablePrompt(t)),this.ulElement.toggleClass("show"),a(e)}},{key:"addVariable",value:function(e){var t=this.element.val().trim();this.ulElement.removeClass("show"),this.ngModel.$setViewValue(u.selectVariable(t,e)),this.ngModel.$render(),this.element[0].focus()}},{key:"closeVariablePrompt",value:function(e){var t=this.element.val().trim();this.isVariablesListVisible()&&(this.ulElement.removeClass("show"),this.element.val(u.removeVariablePrompt(t)),a(e))}},{key:"isVariablesListVisible",value:function(){return this.ulElement.hasClass("show")}}]),e}();r["default"]=f},{}],82:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e){function t(t,r,n,a){function o(e){var t=!r[0].contains(e.target),n=a.isVariablesListVisible();t&&n&&r.val(a.closeVariablePrompt(e))}e.on("click",o),t.$on("$destroy",function(){e.off("click",o)})}return{restrict:"A",require:"variableSelector",link:t}};r["default"]=n},{}],83:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var a=e("../controllers/SelectorController.js"),o=n(a),i=function(){function e(e,t,r,n){var a=n[0],o=n[1];a.init(t,o)}return{restrict:"A",require:["variableSelector","ngModel"],scope:{},link:e,controller:o["default"],controllerAs:"selectorCtrl",bindToController:!0}};r["default"]=i},{"../controllers/SelectorController.js":81}],84:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(e){var t=function(){function t(){n(this,t),this.id=void 0,this.name=void 0,this.description=void 0,this.type=void 0,this.value=void 0,this.options=[],this.updatedAt=void 0}return a(t,[{key:"save",value:function(t){var r,n={},a=["id","updatedAt"];for(var o in this)!angular.isFunction(this[o])&&this.hasOwnProperty(o)&&-1===a.indexOf(o)&&("type"===o?n[o]=this[o].id:n[o]=this[o]);return r=void 0===this.id?e.post(t,n):e.put(this.id,n)}},{key:"remove",value:function(){return void 0===this.id?!1:e["delete"](this.id)}}]),t}();return t};r["default"]=o},{}],85:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a=function(e){var t=function r(){n(this,r),this.id=void 0,this.name=void 0,this.helper=void 0};return t};r["default"]=a},{}],86:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(){n(this,e),this.collection={}}return a(e,[{key:"addType",value:function(e,t){var r=this;if(void 0!==r.collection[e])throw new Error("Form type with provided name already exist");return r.collection[e]=t,r}},{key:"getType",value:function(e){var t=this;return void 0!==t.collection[e]?t.collection[e]:!1}},{key:"$get",value:function(){return this}}]),e}();r["default"]=o},{}],87:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=e("../entity/Variable.js"),s=n(i),u=function(e){var t=(0,s["default"])(this),r=new t;return r.id=e.id,r.name=e.name,r.description=e.description,r.type=e.type,r.value=e.value,r.options=e.options,r.updatedAt=e.updated_at,r},c=function(e,t){return e=angular.isArray(e)?e:[e],e.concat(t)},l=function(){function e(t,r){a(this,e),this.http=t,this.q=r}return o(e,[{key:"getEntityObject",value:function(){var e=(0,s["default"])(this);return new e}},{key:"get",value:function(e){var t=this,r=this.q.defer();return this.http({method:"GET",url:"/api/variables/"+e,transformResponse:c(this.http.defaults.transformResponse,function(e,r,n){return 400>n?u.call(t,e.data):e})}).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise}},{key:"query",value:function(e,t){var r=this,n=this.q.defer();return this.http({method:"GET",url:"/api/containers/"+e+"/variables",params:t,transformResponse:c(this.http.defaults.transformResponse,function(e){for(var t in e.data)e.data[t]instanceof Object&&(e.data[t]=u.call(r,e.data[t]));return e})}).success(function(e){n.resolve(e)}).error(function(e){n.reject(e)}),n.promise}},{key:"queryAllAvailable",value:function(e,t){var r=this,n=this.q.defer();return this.http({method:"GET",url:"/api/containers/"+e+"/available-variables",params:t,transformResponse:c(this.http.defaults.transformResponse,function(e){for(var t in e.data)e.data[t]instanceof Object&&(e.data[t]=u.call(r,e.data[t]));return e})}).success(function(e){n.resolve(e)}).error(function(e){n.reject(e)}),n.promise}},{key:"delete",value:function(e){var t=this.q.defer();return this.http({method:"DELETE",url:"/api/variables/"+e}).success(function(e){t.resolve(e)}).error(function(e){t.reject(e)}),t.promise}},{key:"post",value:function(e,t){var r=this,n=this.q.defer();return this.http({method:"POST",url:"/api/containers/"+e+"/variables",data:t,transformResponse:c(this.http.defaults.transformResponse,function(e,t,n){return 400>n?u.call(r,e.data):e})}).success(function(e){n.resolve(e)}).error(function(e){n.reject(e)}),n.promise}},{key:"put",value:function(e,t){var r=this,n=this.q.defer();return this.http({method:"PUT",url:"/api/variables/"+e,data:t,transformResponse:c(this.http.defaults.transformResponse,function(e,t,n){return 400>n?u.call(r,e.data):e})}).success(function(e){n.resolve(e)}).error(function(e){n.reject(e)}),n.promise}}]),e}();r["default"]=l},{"../entity/Variable.js":84}],88:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=e("../entity/VariableType.js"),s=n(i),u=function(e){var t=(0,s["default"])(this),r=new t;return r.id=e.id,r.name=e.name,r.helper=e.helper,r},c=function(e,t){return e=angular.isArray(e)?e:[e],e.concat(t)},l=function(){function e(t,r){a(this,e),this.http=t,this.q=r}return o(e,[{key:"getEntityObject",value:function(){var e=(0,s["default"])(this);return new e}},{key:"query",value:function(e){var t=this,r=this.q.defer();return this.http({method:"GET",url:"/api/variable-types",params:e,transformResponse:c(this.http.defaults.transformResponse,function(e){for(var r in e.data)e.data[r]instanceof Object&&(e.data[r]=u.call(t,e.data[r]));return e})}).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise}}]),e}();r["default"]=l},{"../entity/VariableType.js":85}],89:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e){return"{{"===e.slice(-2)}function o(e){return(e+" {{").trim()}function i(e){return e.substring(0,e.length-2).trim()}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u='\n    <span class="input-group-addon" ng-click="selectorCtrl.toggleVariablesList($event)" style="cursor: pointer;">\n        <i class="icon-variable-insert"></i>\n    </span>',c='<div class="input-group cc-select"></div>',l=function(){function e(){n(this,e)}return s(e,[{key:"getTemplate",value:function(){return u}},{key:"getElementWrapper",value:function(){return c}},{key:"addVariablePrompt",value:function(e){var t=a(e)?e:o(e);return t}},{key:"selectVariable",value:function(e,t){return(e+" "+t.name+" }}").trim()}},{key:"removeVariablePrompt",value:function(e){return a(e)?i(e):e}}],[{key:"selectorFactory",value:function(){return new e}}]),e}();r["default"]=l},{}],90:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var a=e("./controllers/ManageController.js"),o=n(a),i=e("./controllers/CreateController.js"),s=n(i),u=e("./controllers/EditController.js"),c=n(u),l=e("./controllers/SelectorController"),f=n(l),d=e("./resource/VariableResource.js"),h=n(d),p=e("./resource/VariableTypeResource.js"),v=n(p),g=e("./providers/VariableFormProvider.js"),m=n(g),y=e("./services/VariableSelector.js"),b=n(y),j=e("./directives/variableSelector.js"),P=n(j),w=e("./directives/variableClickOutside.js"),C=n(w),O="clearcode.tm.variable",_="app/modules/variable",E="clearcode.tm.condition";o["default"].$inject=["ngTableParams","$stateParams",O+".variableResource","clearcode.tm.alert.alert","clearcode.tm.tagContainer.paramConverter","clearcode.tm.tagContainer.currentContainer","clearcode.tm.pageInfo.pageInfo","$scope","$state","$translate"],f["default"].$inject=["$compile","$stateParams","$scope",O+".variableSelector",E+".condition"],s["default"].$inject=[O+".variableResource",O+".variableTypeResource","clearcode.tm.pageInfo.pageInfo","$scope",O+".$variableForm","clearcode.tm.tagContainer.currentContainer","$stateParams","clearcode.tm.alert.alert","$state","$translate","clearcode.tm.condition.condition"],c["default"].$inject=[O+".variableResource",O+".variableTypeResource","clearcode.tm.pageInfo.pageInfo","$scope",O+".$variableForm","clearcode.tm.tagContainer.currentContainer","$stateParams","clearcode.tm.alert.alert","$state","$translate","clearcode.tm.condition.condition"],h["default"].$inject=["$http","$q"],C["default"].$inject=["$document"],v["default"].$inject=["$http","$q"],angular.module(O,["pascalprecht.translate","ui.router","ngTable","clearcode.tm.alert","clearcode.tm.pageInfo","clearcode.tm.tagContainer"]).config(["$stateProvider",function(e){e.state("variables",{url:"/containers/{containerId}/variables",controller:O+".ManageController as view",templateUrl:_+"/views/manage.html",data:{roles:["ROLE_SUPER_ADMIN"],hasContainerList:!0}}).state("variableCreate",{url:"/containers/{containerId}/variable-create",controller:O+".CreateController as view",templateUrl:_+"/views/create.html",data:{roles:["ROLE_SUPER_ADMIN"],hasContainerList:!0}}).state("variableEdit",{url:"/containers/{containerId}/variable-edit/{variableId}",controller:O+".EditController as view",templateUrl:_+"/views/edit.html",data:{roles:["ROLE_SUPER_ADMIN"],hasContainerList:!0}})}]).run(["clearcode.tm.alert.$alert",function(e){e.addMessagePattern("variables.close","You are trying to close unsaved variable.")}]).controller(O+".ManageController",o["default"]).controller(O+".CreateController",s["default"]).controller(O+".EditController",c["default"]).controller(O+".SelectorController",f["default"]).service(O+".variableResource",h["default"]).service(O+".variableTypeResource",v["default"]).provider(O+".$variableForm",m["default"]).service(O+".variableSelector",b["default"]).directive("variableSelector",P["default"]).directive("variableClickOutside",C["default"]),t.exports={MODULE_NAME:O}},{"./controllers/CreateController.js":78,"./controllers/EditController.js":79,"./controllers/ManageController.js":80,"./controllers/SelectorController":81,"./directives/variableClickOutside.js":82,"./directives/variableSelector.js":83,"./providers/VariableFormProvider.js":86,"./resource/VariableResource.js":87,"./resource/VariableTypeResource.js":88,"./services/VariableSelector.js":89}],91:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var a=e("./providers/AlertProvider.js"),o=n(a),i=e("./controllers/AlertController.js"),s=n(i),u=e("./directives/AlertDirective.js"),c=n(u),l=e("./services/Alert.js"),f=n(l),d=e("./services/RefreshAlert.js"),h=n(d),p=e("./services/AlertStorage.js"),v=n(p),g=e("./services/UniqueStorage.js"),m=n(g),y="clearcode.tm.alert";f["default"].$inject=["$timeout",y+".alertStorage",y+".$alert","$translate"],h["default"].$inject=["$timeout",y+".alertStorage",y+".$alert","$translate","$window"],c["default"].$inject=[y+".alert",y+".$alert","$window"],s["default"].$inject=[y+".alertStorage"],angular.module(y,["pascalprecht.translate","ngSanitize","ngAnimate"]).provider(y+".$alert",o["default"]).factory(y+".alertStorage",function(){return new v["default"]}).factory(y+".alertUniqueStorage",function(){return new m["default"]}).service(y+".alert",f["default"]).service(y+".refreshAlert",h["default"]).directive("ccNotification",c["default"]).controller(y+".AlertController",s["default"]),t.exports={MODULE_NAME:y}},{"./controllers/AlertController.js":92,"./directives/AlertDirective.js":93,"./providers/AlertProvider.js":94,"./services/Alert.js":95,"./services/AlertStorage.js":96,"./services/RefreshAlert.js":97,"./services/UniqueStorage.js":98}],92:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(t){n(this,e),this.storage=t}return a(e,[{key:"getAll",value:function(){return this.storage.getAlerts()}},{key:"remove",value:function(e){this.storage.remove(e)}},{key:"clear",value:function(){this.storage.clean()}}]),e}();r["default"]=o},{}],93:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t){return{restrict:"E",templateUrl:"modules/alert/views/alert.html",scope:{interval:"="},controller:"clearcode.tm.alert.AlertController",controllerAs:"alertCtrl",link:function(r){e.settings.interval=angular.isDefined(r.interval)?r.interval:t.interval}}};r["default"]=n},{}],94:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function(){function e(){n(this,e),this.interval=6e3,this.messagePatterns={}}return o(e,[{key:"addMessagePattern",value:function(e,t){var r=this;if(void 0!==r.messagePatterns[e])throw new Error("Pattern with provided id already exist");return r.messagePatterns[e]=t,r}},{key:"addMessagesPattern",value:function(e){var t=this;if(!angular.isArray(e))throw new Error("AlertProvider.addMessagesPattern expects\n                 first argument to be Array but received "+("undefined"==typeof e?"undefined":a(e)));return angular.forEach(e,function(e){angular.isObject(e)&&angular.forEach(e,function(e,r){t.addMessagePattern(r,e)})}),t}},{key:"getMessagePattern",value:function(e){var t=this;return void 0!==t.messagePatterns[e]?t.messagePatterns[e]:!1}},{key:"$get",value:function(){return this}}]),e}();r["default"]=i},{}],95:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(e){var t=this;return t.settings.interval>0?t.$timeout(function(){t.storage.remove(e)},t.settings.interval):void 0},i=function(e,t,r){var n,a,i=this;n=i.convertToMessage(t,r),i.translate([n]).then(function(t){return a=i.storage.add(e,t[n]),o.call(i,a),a})},s=function(){function e(t,r,a,o){n(this,e),this.storage=r,this.$timeout=t,this.settings=void 0===this.settings?a:angular.extend(this.settings,a),this.INFO_TYPE="info",this.ERROR_TYPE="danger",this.SUCCESS_TYPE="success",this.translate=o}return a(e,[{key:"success",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?[]:arguments[1];i.call(this,this.SUCCESS_TYPE,e,t)}},{key:"error",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?[]:arguments[1];i.call(this,this.ERROR_TYPE,e,t)}},{key:"info",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?[]:arguments[1];i.call(this,this.INFO_TYPE,e,t)}},{key:"getStorage",value:function(){return this.storage}},{key:"convertToMessage",value:function(e,t){var r,n;return r=this,angular.isDefined(e)&&(e=r.settings.getMessagePattern(e)),n=vsprintf(e,t)}}]),e}();r["default"]=s},{}],96:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a,o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function(){function e(){n(this,e),a=0,this.collection={}}return o(e,[{key:"getAlerts",value:function(){return this.collection}},{key:"getAlert",value:function(e){return this.collection[e]}},{key:"add",value:function(e,t){return this.collection[a]={type:e,message:t},a++}},{key:"has",value:function(e,t){for(var r in this.collection)if(e===this.collection[r].type&&t===this.collection[r].message)return!0;return!1}},{key:"remove",value:function(e){var t=this;return void 0!==t.collection[e]?(delete t.collection[e],!0):!1}},{key:"clean",value:function(){this.collection={}}}]),e}();r["default"]=i},{}],97:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=function d(e,t,r){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var a=Object.getPrototypeOf(e);return null===a?void 0:d(a,t,r)}if("value"in n)return n.value;var o=n.get;if(void 0!==o)return o.call(r)},c=e("./Alert.js"),l=n(c),f=function(e){function t(e,r,n,i,s){a(this,t);var u=o(this,Object.getPrototypeOf(t).call(this,e,r,n,i));return u.window=s,u}return i(t,e),s(t,[{key:"success",value:function(e,r){this.window.localStorage[e]&&(u(Object.getPrototypeOf(t.prototype),"success",this).call(this,r),this.window.localStorage.removeItem(e))}}]),t}(l["default"]);r["default"]=f},{"./Alert.js":95}],98:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=function d(e,t,r){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var a=Object.getPrototypeOf(e);return null===a?void 0:d(a,t,r)}if("value"in n)return n.value;var o=n.get;if(void 0!==o)return o.call(r)},c=e("./AlertStorage.js"),l=n(c),f=function(e){function t(){return a(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),s(t,[{key:"add",value:function(e,r){return this.has(e,r)?-1:u(Object.getPrototypeOf(t.prototype),"add",this).call(this,e,r)}}]),t}(l["default"]);r["default"]=f},{"./AlertStorage.js":96}],99:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var a=e("./directives/clipboardDirective.js"),o=n(a),i="clearcode.tm.clipboard";o["default"].$inject=["$compile"],angular.module(i,["ngClipboard"]).directive("ccClipboard",o["default"]),t.exports={MODULE_NAME:i}},{"./directives/clipboardDirective.js":100}],100:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e){return{restrict:"A",scope:{ngModel:"="},link:function(t,r){r.wrap('<div class="cc-clipboard"></div>');var n=angular.element(document.getElementById("clipboard.html")).html(),a=e(n)(t),o=r.parent();o.append(a);var i=o.find("button");i.addClass("hidden"),o.on("mouseenter",function(){i.removeClass("hidden")}).on("mouseleave",function(){i.addClass("hidden")}),t.copyToClipboard=function(){return t.ngModel}}}};r["default"]=n},{}],101:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var a=e("./directives/ConfirmDirective.js"),o=n(a),i="clearcode.tm.confirm";angular.module(i,[]).directive("ccConfirm",o["default"]),t.exports={MODULE_NAME:i}},{"./directives/ConfirmDirective.js":102}],102:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){return{restrict:"A",templateUrl:"modules/confirm/views/confirm.html",transclude:!0,replace:!0,scope:{ccConfirm:"&"},link:function(e){e.turnOn=!1,e.approve=function(){e.ccConfirm()},e.cancel=function(){e.turnOn=!1},e.confirm=function(){
e.turnOn=!0}}}};r["default"]=n},{}],103:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var s=e("../../alert/controllers/AlertController.js"),u=n(s),c=function(e){function t(){return a(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),t}(u["default"]);r["default"]=c},{"../../alert/controllers/AlertController.js":92}],104:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t){return{restrict:"E",templateUrl:"modules/form/views/alertForm.html",scope:{interval:"="},controller:"clearcode.tm.form.AlertFormController",controllerAs:"alertFormCtrl",link:function(r){e.settings.interval=angular.isDefined(r.interval)?r.interval:t.interval}}};r["default"]=n},{}],105:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){return{restrict:"A",require:"?ngModel",scope:{ngModel:"="},link:function(e,t,r){var n="cc-checkbox-checked";t.wrap('<div class="cc-checkbox"></div>'),void 0!==e.ngModel&&(e.ngModel||void 0!==r.ngTrueValue&&e.ngModel===r.ngTrueValue?t.parent().addClass(n):t.parent().removeClass(n)),e.$watch("ngModel",function(e){e===!0||void 0!==r.ngTrueValue&&e===r.ngTrueValue?t.parent().addClass(n):t.parent().removeClass(n)})}}};r["default"]=n},{}],106:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){return{restrict:"A",require:"?ccRadioModel",scope:{ccRadioModel:"=",ccDisabled:"="},link:function(e,t,r){t.wrap('<div class="cc-radio"></div>'),void 0!==e.ccRadioModel&&(e.ccDisabled&&t.parent().addClass("radioDisabled"),e.ccRadioModel===t[0].defaultValue?t.parent().addClass("radioSelected"):t.parent().removeClass("radioSelected")),e.$watch("ccRadioModel",function(e){e===t[0].defaultValue?t.parent().addClass("radioSelected"):t.parent().removeClass("radioSelected")})}}};r["default"]=n},{}],107:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e){return{restrict:"A",priority:1,scope:{ngModel:"=",ccSelectOptions:"=",ccSelectValue:"@",ccSelectLabel:"@"},link:function(t,r,n){r.wrap('<div class="cc-select"></div>'),r.addClass("ng-hide");var a=angular.element(document.getElementById("select-template.html")).html(),o=e(a)(t);r.parent().append(o),t.id=n.id;var i=function(e){for(var r in t.ccSelectOptions)if(t.ccSelectOptions[r][t.ccSelectValue]===e)return r;return!1};t.getActiveOptionLabel=function(){var e=i(t.ngModel);return e!==!1?t.ccSelectOptions[e][t.ccSelectLabel]:""},t.changeSelection=function(e){t.ngModel=e[t.ccSelectValue]}}}};r["default"]=n},{}],108:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var a=e("./directives/CheckboxDirective.js"),o=n(a),i=e("./directives/RadioButtonDirective.js"),s=n(i),u=e("./directives/SelectDirective.js"),c=n(u),l=e("./services/AlertForm.js"),f=n(l),d=e("./directives/AlertFormDirective.js"),h=n(d),p=e("./controller/AlertFormController.js"),v=n(p),g="clearcode.tm.form";f["default"].$inject=["$timeout","clearcode.tm.alert.alertUniqueStorage","clearcode.tm.alert.$alert","$translate"],h["default"].$inject=[g+".alertForm","clearcode.tm.alert.$alert"],v["default"].$inject=["clearcode.tm.alert.alertUniqueStorage"],c["default"].$inject=["$compile"],angular.module(g,["pascalprecht.translate","clearcode.tm.alert"]).service(g+".alertForm",f["default"]).directive("ccSelect",c["default"]).directive("ccCheckbox",o["default"]).directive("ccRadio",s["default"]).directive("ccNotificationForm",h["default"]).controller(g+".AlertFormController",v["default"]),t.exports={MODULE_NAME:g}},{"./controller/AlertFormController.js":103,"./directives/AlertFormDirective.js":104,"./directives/CheckboxDirective.js":105,"./directives/RadioButtonDirective.js":106,"./directives/SelectDirective.js":107,"./services/AlertForm.js":109}],109:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var s=e("../../alert/services/Alert.js"),u=n(s),c=function(e){function t(){return a(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),t}(u["default"]);r["default"]=c},{"../../alert/services/Alert.js":95}],110:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@"},templateUrl:"modules/helpSystem/views/helpSystem.html"}};r["default"]=n},{}],111:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var a=e("./directives/HelpSystemDirective.js"),o=n(a),i="clearcode.tm.helpSystem";angular.module(i,[]).directive("ccHelp",o["default"]),t.exports={MODULE_NAME:i}},{"./directives/HelpSystemDirective.js":110}],112:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a,o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function(){function e(t,r,o){var i=this;n(this,e),this.breadcrumb=o.get(),a=r,t.$on("page.info",function(){i.breadcrumb=o.get()})}return o(e,[{key:"stateGo",value:function(e){a.go(e.state,e.params)}}]),e}();r["default"]=i},{}],113:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o="7tag Welcome",i=function(){function e(t,r){var a=this;n(this,e),this.title=o,this["default"]=o,t.$on("page.info",function(){a.info=r.get(),a.setTitle()})}return a(e,[{key:"setTitle",value:function(){this.title=this.info.map(function(e){return e.name}).reduce(function(e,t){return e+=" - "+t})}}]),e}();r["default"]=i},{}],114:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){return{restrict:"E",templateUrl:"modules/pageInfo/views/breadcrumb.html",controller:"clearcode.tm.pageInfo.BreadcrumbController",controllerAs:"breadcrumbCtrl"}};r["default"]=n},{}],115:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){return{restrict:"A",controller:"clearcode.tm.pageInfo.TitleController",controllerAs:"titleCtrl"}};r["default"]=n},{}],116:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var a=e("./controllers/BreadcrumbController.js"),o=n(a),i=e("./controllers/TitleController.js"),s=n(i),u=e("./directives/BreadcrumbDirective.js"),c=n(u),l=e("./services/PageInfo.js"),f=n(l),d=e("./directives/TitleDirective.js"),h=n(d),p="clearcode.tm.pageInfo";o["default"].$inject=["$scope","$state",p+".pageInfo"],s["default"].$inject=["$scope",p+".pageInfo"],f["default"].$inject=["$rootScope"],angular.module(p,[]).controller(p+".BreadcrumbController",o["default"]).controller(p+".TitleController",s["default"]).directive("ccBreadcrumb",c["default"]).directive("ccTitle",h["default"]).service(p+".pageInfo",f["default"]),t.exports={MODULE_NAME:p}},{"./controllers/BreadcrumbController.js":112,"./controllers/TitleController.js":113,"./directives/BreadcrumbDirective.js":114,"./directives/TitleDirective.js":115,"./services/PageInfo.js":117}],117:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a,o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function(){function e(t){n(this,e),this.navigation=[],a=t}return o(e,[{key:"add",value:function(e,t,r){return this.navigation.push({name:e,state:t,params:r}),this}},{key:"clear",value:function(){return this.navigation=[],this}},{key:"broadcast",value:function(){a.$broadcast("page.info")}},{key:"get",value:function(){return this.navigation}}]),e}();r["default"]=i},{}],118:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){return function(e){return Math.ceil(e)}};r["default"]=n},{}],119:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t){var r=e("date");return function(e){var n=arguments.length<=1||void 0===arguments[1]?null:arguments[1];return null===n&&(n=t),r(e,n)}};r["default"]=n},{}],120:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var a=e("./filters/tmDateFilter.js"),o=n(a),i=e("./filters/tmCeilFilter.js"),s=n(i),u="clearcode.tm.sanitize";o["default"].$inject=["$filter","defaultDateFormat"],angular.module(u,[]).filter("tmDate",o["default"]).filter("tmCeil",s["default"]),t.exports={MODULE_NAME:u}},{"./filters/tmCeilFilter.js":118,"./filters/tmDateFilter.js":119}],121:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(t){n(this,e),this.$window=t}return a(e,[{key:"lint",value:function(e,t){return this.$window.HTMLHint?this.$window.HTMLHint.verify(e,t):[]}}]),e}();r["default"]=o},{}],122:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o={"tagname-lowercase":!1,"attr-lowercase":!1,"attr-value-double-quotes":!1,"attr-value-not-empty":!1,"attr-no-duplication":!1,"doctype-first":!1,"tag-pair":!1,"tag-self-close":!1,"spec-char-escape":!1,"id-unique":!1,"src-not-empty":!1,"title-require":!1,"head-script-disabled":!1,"doctype-html5":!1,"id-class-value":!1,"style-disabled":!1,"inline-style-disabled":!1,"inline-script-disabled":!1,"space-tab-mixed-disabled":!1,"id-class-ad-disabled":!1,"href-abs-or-rel":!1,"attr-unsafe-chars":!1},i={browser:!0,devel:!0,dojo:!0,jquery:!0,mootools:!0,nonstandard:!0,prototypejs:!0,yui:!0,bitwise:!1,camelcase:!1,curly:!0,enforceall:!1,eqeqeq:!0,es3:!1,es5:!1,forin:!1,freeze:!1,funcscope:!0,futurehostile:!0,immed:!1,latedef:!1,nocomma:!0,nonew:!0,notypeof:!0,shadow:"inner",strict:!1,sub:!1,undef:!0,unused:!0,asi:!0},s=function(){function e(){n(this,e)}return a(e,[{key:"getLintingRules",value:function(){var e=angular.copy(i),t=angular.copy(o);return t.jshint=e,t}}]),e}();r["default"]=s},{}],123:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o="<!DOCTYPE HTML><html><head>",i="</head><body></body></html>",s=function(){function e(t,r,a){n(this,e),this.tagTemplateToJsConverter=t,this.lintingRules=r,this.htmlLinter=a}return a(e,[{key:"validate",value:function(e,t,r){if(t.deactivate)return[];var n=this.wrapInHtmlTag(e),a=n.split("\n");this.tagTemplateToJsConverter.convert(a,r.options);for(var o=a.join("\n"),i=this.lint(o,t),s=this.filterOutHtmlErrors(i,a.length),u=[],c=0;c<s.length;c++)u.push(this.mapToLintRepresentation(s[c]));return u}},{key:"wrapInHtmlTag",value:function(e){return o+"\n                "+e+"\n                "+i}},{key:"filterOutHtmlErrors",value:function(e,t){for(var r=[],n=0;n<e.length;n++){var a=e[n];this.isHtmlError(a,t)||(a.line-=1,r.push(a))}return r}},{key:"isHtmlError",value:function(e,t){return 0===e.line||e.line===t}},{key:"lint",value:function(e,t){t=t||{};var r=angular.extend({},this.lintingRules.getLintingRules(),t);return this.htmlLinter.lint(e,r)}},{key:"mapToLintRepresentation",value:function(e){return{from:CodeMirror.Pos(e.line-1,0),to:CodeMirror.Pos(e.line-1,0),message:e.message,severity:e.type}}}]),e}();r["default"]=s},{}],124:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o="{{",i="}}",s=function(){function e(){n(this,e)}return a(e,[{key:"convert",value:function(e,t){if(!t||!t.variables)return e;for(var r=this.getVariables(t),n=0;!this.isCursorAfterTheEndOfText(e.length,n);){var a=e[n],i=-1!==a.indexOf(o);i&&(e[n]=this.replaceVariablesExpressions(r,a)),++n}return e}},{key:"isCursorAfterTheEndOfText",value:function(e,t){return t>=e}},{key:"getVariables",value:function(e){for(var t=[],r=0;r<e.variables.length;r++){var n=e.variables[r],a=n.name.trim().split(/\s+/),o={name:n.name,pattern:this.createVariableSearchPattern(n.name),replacement:"'"+a.join("_")+"'"};t.push(o)}return t}},{key:"createVariableSearchPattern",value:function(e){var t="[\\s]",r=e.split(/[\s]+/),n=r.join(t+"+");return n=""+o+t+"*"+n+t+"*"+i,new RegExp(n,"g")}},{key:"replaceVariablesExpressions",value:function(e,t){for(var r=0;r<e.length;r++){var n=e[r];t=t.replace(n.pattern,n.replacement)}return t}}]),e}();r["default"]=s},{}],125:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o={mode:{name:"htmlmixed"},lineNumbers:!0,styleActiveLine:!0,matchBrackets:!0,theme:"stg",gutters:["CodeMirror-lint-markers"],lint:{}},i=function(){function e(t){n(this,e),this.tagTemplateLinter=t}return a(e,[{key:"getConfig",value:function(e){var t=this,r=angular.isObject(e)?e:{},n=angular.extend({},o,r);return n.lint.getAnnotations=function(e,r,n){return t.tagTemplateLinter.validate(e,r,n)},n}}]),e}();r["default"]=i},{}],126:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var a=e("./service/TextEditorConfig.js"),o=n(a),i=e("./service/TagTemplateLinter.js"),s=n(i),u=e("./service/TagTemplateToJsConverter.js"),c=n(u),l=e("./service/LintingRules.js"),f=n(l),d=e("./service/HTMLLinter.js"),h=n(d),p="clearcode.tm.textEditor";o["default"].$inject=[p+".TagTemplateLinter"],s["default"].$inject=[p+".TagTemplateToJsConverter",p+".LintingRules",p+".HTMLLinter"],h["default"].$inject=["$window"],angular.module(p,[]).service(p+".LintingRules",f["default"]).service(p+".HTMLLinter",h["default"]).service(p+".TagTemplateToJsConverter",c["default"]).service(p+".TagTemplateLinter",s["default"]).service(p+".TextEditorConfig",o["default"]).run(["$rootScope",p+".TextEditorConfig",function(e,t){e.TextEditorConfig=t}]),t.exports={MODULE_NAME:p}},{"./service/HTMLLinter.js":121,"./service/LintingRules.js":122,"./service/TagTemplateLinter.js":123,"./service/TagTemplateToJsConverter.js":124,"./service/TextEditorConfig.js":125}],127:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t){return function(r){var n=t.defer();return e({method:"GET",url:r.url,cache:r.cache}).success(function(e){n.resolve(e)}).error(function(){n.reject()}),n.promise}};r["default"]=n},{}],128:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(t){n(this,e),this.languages=[],this.translationFactory=t}return a(e,[{key:"getLanguages",value:function(){return this.languages}},{key:"hasLanguage",value:function(e){return this.languages.hasOwnProperty(e)}},{key:"loadAvailableTranslations",value:function(){var e=this;return this.translationFactory({url:"/api/translations",cache:!1}).then(function(t){for(var r in t)e.languages.push({id:r,name:t[r]})})}}]),e}();r["default"]=o},{}],129:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var a=e("./factory/TranslationFactory.js"),o=n(a),i=e("./services/Translation.js"),s=n(i),u="clearcode.tm.translation";o["default"].$inject=["$http","$q"],s["default"].$inject=[u+".translationFactory"],angular.module(u,[]).factory(u+".translationFactory",o["default"]).service(u+".translation",s["default"]),t.exports={MODULE_NAME:u}},{"./factory/TranslationFactory.js":127,"./services/Translation.js":128}],130:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},a=function(e){return"object"===("undefined"==typeof e?"undefined":n(e))&&"function"==typeof e.then},o=function(e,t){return{restrict:"A",scope:{formResource:"="},link:function(r,n){r.$watch("formResource",function(o){o&&a(o)&&o.then(function(){},function(a){a.errors.hasOwnProperty("form")&&(e.getMessagePattern("login.server")||e.addMessagePattern("login.server",a.errors.form[0]),t.getStorage().clean(),t.error("login.server"));for(var o in a.errors.fields)if(a.errors.fields.hasOwnProperty(o)){var i=r.$parent[n[0].attributes.name.value];if(a.errors.fields[o]instanceof Array&&0!==a.errors.fields[o].length)i[o].$invalid=!0,i[o].$setDirty(),i[o].$error[o]=a.errors.fields[o];else for(var s in a.errors.fields[o].fields)a.errors.fields[o].fields.hasOwnProperty(s)&&0!==a.errors.fields[o].fields[s].length&&(i[s].$invalid=!0,i[s].$error[s]=a.errors.fields[o].fields[s])}})},!1)}}};r["default"]=o},{}],131:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var a=e("./directives/stgFormDirective.js"),o=n(a),i="clearcode.tm.validator";o["default"].$inject=["clearcode.tm.alert.$alert","clearcode.tm.form.alertForm"],angular.module(i,["clearcode.tm.alert","clearcode.tm.form"]).directive("stgForm",o["default"]),t.exports={MODULE_NAME:i}},{"./directives/stgFormDirective.js":130}]},{},[1]);
//# sourceMappingURL=app.js.map
